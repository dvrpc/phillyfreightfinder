function clkHwy(a){if(initializeHL(a),header="<p>"+props.Name+"</p>",void 0===props.Owner)var b=" ";else var b="<div class='two_third' style='float:left;'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div>";content="<div id='baseInfo'>"+b+"</div><img src='lib/images/Shields/"+props.SHLD_ID+".png' alt='Shield' height='50' style='padding-left:20px;'></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td class='item'><strong> </strong></td><td><strong>"+props.DIR_1+"</strong></td><td><strong>"+props.DIR_2+"</strong></td></tr><tr class='active'><td class='item'><strong><a title='Predominant lane count for designated segment' data-toggle='infotooltip'>Capacity <span style='font-weight:normal;'>(lanes)</span></a>: </strong></td><td>"+props.CAP_1+"</td><td>"+props.CAP_2+"</td></tr><tr><td class='item'><strong><a title='Average Annual Daily Traffic volume for truck traffic (FHWA Vehicle Classes 5-13)' data-toggle='infotooltip'>Truck AADT</a>: </strong></td><td>"+props.ACT_1A+"</td><td>"+props.ACT_2A+"</td></tr><tr><td class='item'><strong>Truck share of <a title='Average Annual Daily Traffic' data-toggle='infotooltip'>AADT</a>: </strong></td><td>"+props.ACT_1B+"</td><td>"+props.ACT_2B+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.YEAR+" "+props.SOURCE+"</div></div>",featureName="<p>Type: "+props.Type+"</p>",featureClass="hwycl",featureIcon="hwyicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkParking(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Truck Spaces Available: </strong></td><td>"+props.Capacity+"</td></tr><tr><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Truck Spaces Utilized</a>: </strong></td><td> "+props.Activity_1+" </td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Truck Parking</p>",featureClass="hwycl",featureIcon="trkparkicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkNHS(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Fac_Served+"</div><div class='labelfield'>Facility Served</div><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> <a title='Predominant lane count for designated segment' data-toggle='infotooltip'>Lanes per direction</a>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong> <a title='Average Annual Daily Traffic' data-toggle='infotooltip'>AADT</a>: </strong></td><td>not available</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: NHS Connector</p>",featureClass="hwycl",featureIcon="nhsicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkHwyRvrXing(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Line+"</div><div class='labelfield'>Highway</div><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Tolled (y/n)</div><div class='datafield'>"+props.Type_1+"</div><div class='labelfield'>Bridge Type</div><div class='datafield'>"+props.Town_1+" - "+props.Town_2+"</div><div class='labelfield'>Connecting Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong><a title='Total count of lanes, both directions.' data-toggle='infotooltip'>Travel Lanes</a>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong>Vertical Restriction <span style='font-weight:normal;'>(ft)</span>: </strong></td><td>"+props.Cap_2+"</td></tr><tr class='active'><td><strong> <a title='Average Annual Daily Traffic' data-toggle='infotooltip'>AADT</a>: </strong></td><td>"+props.Act_1+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Highway River Crossing</p>",featureClass="hwycl",featureIcon="hwyrivicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailline(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator+"</div><div class='labelfield'>Operator(s)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#IntermodalCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='IntermodalCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> <a title='Predominant count of through tracks on designated segment' data-toggle='infotooltip'>Number of Tracks</a>: </strong></td><td>"+props.Cap1+"</td></tr><tr><td><strong> <a title='Ability to operate double stack trains. Double stack is a technology allowing intermodal containers to be stack two high on train cars.' data-toggle='infotooltip'>Double Stack Clearance</a>: </strong></td><td> "+props.Cap2+" </td></tr><tr class='active'><td><strong> <a title='Capacity to operate 286,000 pound rail cars on designated segment' data-toggle='infotooltip'>286k Capacity</a>: </strong></td><td>"+props.Cap3+"</td></tr><tr><td><strong> Trains Daily: </strong></td><td>not reported</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: "+props.Type+"</p>",featureClass="railcl",featureIcon="railicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailYard(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Rail_Line+"</div><div class='labelfield'>Line Serving</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#IntermodalCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='IntermodalCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Acres: </strong></td><td>"+numeral(props.GIS_Acres).format("0,0.0")+"</td></tr><tr><td><strong>Annual Car Count: </strong></td><td>n/a</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Rail Yard</p>",featureClass="railcl",featureIcon="railyardicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailXing(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner_1+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> <a title='Count of active tracks at grade crossing' data-toggle='infotooltip'>Tracks at Crossing</a>: </strong></td><td>"+props.Cap+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source_1+"</div></div><div style='height:34px;'><a href='http://safetydata.fra.dot.gov/OfficeofSafety/publicsite/Crossing/Report.aspx?phasetype=C&rpttype=A&txtcrossingnum="+props.CROSSING+"' target='_blank' style='line-height:34px;float:left;'><div class='pdf'></div>Related Report:</a></div>",featureName="<p>Type: Class I Grade Crossing</p>",featureClass="railcl",featureIcon="railcrossicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkIntermodal(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#IntermodalCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='IntermodalCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Acres: </strong></td><td>"+numeral(props.GIS_Acres).format("0,0.0")+"</td></tr><tr><td><strong>Activity: </strong></td><td>n/a</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Intermodal Rail Yard</p>",featureClass="railcl",featureIcon="railintericon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailRvrXing(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Line+"</div><div class='labelfield'>Rail Line</div><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Type_1+"</div><div class='labelfield'>Bridge Type</div><div class='datafield'>"+props.Town_1+" - "+props.Town_2+"</div><div class='labelfield'>Connecting Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Width <span style='font-weight:normal;'>(tracks)</span>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong> <a title='Ability to operate double stack trains. Double stack is a technology allowing intermodal containers to be stack two high on train cars.' data-toggle='infotooltip'>Double Stack Clearance</a>: </strong></td><td>"+props.Cap_2+"</td></tr><tr class='active'><td><strong> <a title='Capacity to operate 286,000 pound rail cars on designated segment' data-toggle='infotooltip'>286k Capacity</a>: </strong></td><td>"+props.Cap_3+"</td></tr><tr><td><strong>Activity: </strong></td><td>"+props.Act_1+"</a></td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Rail River Crossing</p>",featureClass="railcl",featureIcon="railrivicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkport(a){initializeHL(a),header="<p>"+props.Name+"</p>";var b="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipal Location</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#portCap' data-toggle='tab'>Capacity</a></li><li><a href='#portAct' data-toggle='tab'>Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='portCap' style='padding-bottom: 12px;height:72px;'><table class='table table-hover'><tr class='active'><td><strong>Berth Depth <span style='font-weight:normal;'><a title='Mean Low Water' data-toggle='infotooltip'>(MLW)</a></span>: </strong></td><td>not reported</td></tr><tr class='active'><td><strong>Storage Capacity: </strong></td><td>not reported</td></tr></table></div><div class='tab-pane' id='portAct' style='padding-bottom: 12px;height:72px;'><table class='table table-hover'><tr class='active'><td class='item'><strong>2012 Ship Arrivals: </strong></td><td>"+props.Act_1+"</td><td>o</td></tr><tr class='active'><td class='item'><strong>Cargo handled: </strong></td><td colspan='2' style='line-height:1!important;'>"+props.Cargo+"</td></tr></table></div></div><div class='labelfield source'>"+props.Source+"</div></div>",c="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipal Location</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#portCap' data-toggle='tab'>Capacity</a></li><li><a href='#portAct' data-toggle='tab'>Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='portCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Qty of Berths: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong>Total Berth Length: </strong></td><td>"+props.Cap_2+" linear ft</td></tr><tr class='active'><td><strong>Berth Depth <span style='font-weight:normal;'><a title='Mean Low Water' data-toggle='infotooltip'>(MLW)</a></span>: </strong></td><td>"+props.Cap_3+" feet</td></tr><tr><td><strong>Available Cranes: </strong></td><td><a title='"+props.Cap_4+"' data-toggle='infotooltip'>"+props.Cap_41+"</a></td></tr><tr class='active'><td><strong>Warehouse Space: </strong></td><td>"+props.Cap_5+"</td></tr></table></div><div class='tab-pane' id='portAct' style='padding-bottom: 12px;height:132px;'><table class='table table-hover'><tr class='active'><td class='item'><strong>2012 Ship Arrivals: </strong></td><td>"+props.Act_1+"</td><td>o</td></tr><tr class='active'><td class='item'><strong>Cargo handled: </strong></td><td colspan='2' style='line-height:1!important;'>"+props.Cargo+"</td></tr></table></div></div><div class='labelfield source'>"+props.Source+"</div></div>";content="Bulk"==props.Type?b:c,featureName="<p>Type: "+props.Type+" Terminal</p>",featureClass="portcl",featureIcon="porticon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkanchorage(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Adjacent Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> Annual Ships ("+props.YEAR+"): </strong></td><td>"+props.Act_1+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Anchorage</p>",featureClass="portcl",featureIcon="anchicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkriver(a){initializeHL(a),header="<p>"+props.NAME+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Adjacent Municipality(ies)</div><div class='datafield'>"+props.Start+"</div><div class='labelfield'> <a title='Nautical miles from Atlantic Ocean' data-toggle='infotooltip'>Start Point</a>: </div><div class='datafield'>"+props.End+"</div><div class='labelfield'> <a title='Nautical miles from Atlantic Ocean' data-toggle='infotooltip'>End Point</a>: </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Channel Width <span style='font-weight:normal;'>(ft)</span>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong> Channel Depth <span style='font-weight:normal;'><a title='Mean Lower Low Water' data-toggle='infotooltip'>(MLLW in ft)</a></span>: </strong></td><td>"+props.Cap_2+"</td></tr><tr class='active'><td><strong> <a title='Approved vertical clearance within navigable channel' data-toggle='infotooltip'>Maximum Air Draft <span style='font-weight:normal;'>(ft)</span></a>: </strong></td><td>"+props.Cap_3+"</td></tr><tr><td><strong>Annual Activity: </strong></td><td>not reported</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: River Channel</p>",featureClass="portcl",featureIcon="rivericon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkFreightCenter(a){initializeHL(a);var b;header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Center_Typ+"</div><div class='labelfield'>Type</div><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Municipality(ies): </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Acres: </strong></td><td>"+numeral(props.Acres).format("0,0.0")+"</td></tr><tr><td><strong>Output: </strong></td><td>not available</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>","Intermediate"===props.Center_Typ?b="fcinter":"Major"===props.Center_Typ?b="fcmajor":"Mega"===props.Center_Typ&&(b="fcmega"),featureName="<p>Type: "+props.Center_Typ+" Freight Center</p>",featureClass=""+b+"cl",featureIcon=""+b+"icon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkairport(a){initializeHL(a);var b;header="<p>("+props.NAVID+") "+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Airport_Ty+"</div><div class='labelfield'>Type</div><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies): </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Runway(s): </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong>Runway Length(s): </strong></td><td> "+props.Cap_2+" </td></tr><tr class='active'><td><strong>Total Acreage: </strong></td><td>"+props.Cap_3+"</td></tr><tr><td><strong> <a title='Count of annual takeoffs and landings' data-toggle='infotooltip'>Annual Operations</a>: </strong></td><td> "+props.Activity_1+" </td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>","Commercial"===props.Airport_Ty?b="comm":"Reliever"===props.Airport_Ty&&(b="rel"),featureName="<p>Type: "+props.Airport_Ty+" Airport</p>",featureClass=""+b+"aircl",featureIcon=""+b+"icon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkheliport(a){initializeHL(a),header="<p>("+props.LocationID+") "+props.FacilityNa+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.City+"</div><div class='labelfield'>Municipality(ies): </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Diameter: </strong></td><td>"+props.Size+" ft</td></tr><tr><td><strong>Annual Operations: </strong></td><td>not available</td></tr></table></div></div><div class='labelfield source'>Data Source: 2013 DVRPC</div></div>",featureName="<p>Type: Heliport</p>",featureClass="heliportcl",featureIcon="heliporticon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkpipelines(a){initializeHL(a),header="<p>Pipeline</p>",content="<div id='baseInfo'><div class='datafield'>"+props.TYPE+"</div><div class='labelfield'>Material Transported</div><div class='datafield'>"+props.COUNTY+"</div><div class='labelfield'>County</div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Pipeline</p>",featureClass="energycl",featureIcon="pipelineicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkfgneighbor(a){initializeHL(a),header="<p>Freight as a Good Neighbor</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Municipali+"</div><div class='labelfield'>Municipality</div><div class='datafield'>"+props.County+" County</div><div class='labelfield'>County</div><div class='datafield'> "+props.Descr1+props.Descr2+" "+props.Descr3+" </div><div class='labelfield source'>Data Source: 2012 DVRPC</div></div>",featureName="<p>Type: Freight as a Good Neighbor</p>",featureClass="communcl",featureIcon="communicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function displayCountyname(a){var b=a.target;b.bringToFront(),b.setStyle({color:"#312867"});var c=b.feature.properties,d="<p>"+c.NAME+" County</p>";document.getElementById("countyname").innerHTML=d,$("#countyname").hasClass("hidden")&&$("#countyname").removeClass("hidden")}function clearCountyname(a){var b=a.target;b.setStyle({color:"#efefef"}),document.getElementById("countyname").innerHTML=" ",$("#countyname").addClass("hidden")}function showRegional(){resetCounty(),window.location.hash="#region",$("#dataContainer").hasClass("hidden")&&($("#dataContainer").removeClass("hidden"),$("#dataCounty").addClass("hidden"),populateCharts())}function populateCounty(a){mcounty.setStyle({fillColor:"#396ab2"});var b=a.target;b.setStyle({fillColor:"#312867"}),$("#dataCounty").hasClass("hidden")&&($("#dataContainer").addClass("hidden"),$("#dataCounty").removeClass("hidden"));var c=b.feature.properties,d="#region,"+b._leaflet_id;window.location.hash=d;var e="<ul class='bxslider'><li><img src='lib/images/county/small/"+c.NAME+"/1.jpg'  title='"+c.one+"' /></li><li><img src='lib/images/county/small/"+c.NAME+"/2.jpg' title='"+c.two+"' /></li><li><img src='lib/images/county/small/"+c.NAME+"/3.jpg' title='"+c.three+"' /></li><li><img src='lib/images/county/small/"+c.NAME+"/4.jpg' title='"+c.four+"' /></li><li><img src='lib/images/county/small/"+c.NAME+"/5.jpg' title='"+c.five+"' /></li><li><img src='lib/images/county/small/"+c.NAME+"/6.jpg' title='"+c.six+"' /></li><li><img src='lib/images/county/small/"+c.NAME+"/7.jpg' title='"+c.seven+"' /></li><li><img src='lib/images/county/small/"+c.NAME+"/8.jpg' title='"+c.eight+"' /></li></ul>";$("#ctyDataName").html(""+c.NAME+" County"),$("#data-1").html(""+c.IntRouteMi),$("#data-2").html(""+c.NatHwyMile),$("#data-5").html(""+c.truckMiles),$("#data-6").html(""+c.freightRai),$("#data-8").html(""+c.portTermin);var f=parseInt(c.megaCtr,10)+parseInt(c.majCtr,10)+parseInt(c.intCtr,10);$("#data-10").html(""+f),$("#data-11").html(""+c.FCacreage),$("#data-3").html(""+c.NHS),$("#data-4").html(""+c.interch),$("#data-7").html(""+c.yards),$("#data-9").html(""+c.ShipCalls),$("#ctySlideshow").html(""+e);var g=c.NAME,h=c.IntRouteMi,i=c.NatHwyMile,j=c.truckMiles,k=c.freightRai,l=c.portTermin,m=c.megaCtr,n=c.majCtr,o=c.intCtr,p=c.NHS,q=c.interch,r=c.yards,s=c.FCacreage,t=c.LTmiles,u=c.HTmiles,v=c.ShipCalls,w=Math.floor(8*Math.random())+1;if(w=1)var x=c.one;else if(w=2)var x=c.two;else if(w=3)var x=c.three;else if(w=4)var x=c.four;else if(w=5)var x=c.five;else if(w=6)var x=c.six;else if(w=7)var x=c.seven;else if(w=8)var x=c.eight;else w=9;var y=a.target.getBounds(),z={name:g,1:h,2:i,3:j,4:k,5:l,6:m,7:n,8:o,9:p,10:q,11:r,12:s,13:t,14:u,15:v,16:w,17:x},A="modals/mcountyPrint.html?"+serialize(z);$("#countyBtn").html('<a href="'+A+'" target="_blank"><button class="btn btn-primary" ><i class="dynico dynico-compass"></i>&nbsp;&nbsp;Print Version</button></a>'),$("#countyBoundsLink").html('<a href="#map" onClick="zoomToCounty('+y._southWest.lat+", "+y._southWest.lng+", "+y._northEast.lat+", "+y._northEast.lng+');"><button class="btn btn-primary" ><i class="dynico dynico-map"></i>&nbsp;&nbsp;Browse by Map</button></a>');$(".bxslider").bxSlider({auto:!0,slideMargin:5,captions:!0})}function resetCounty(a){mcounty.setStyle({fillColor:"#396ab2"})}function activateTooltip(){$("[data-toggle=infotooltip]").tooltip({placement:"left"})}function zoomToCounty(a,b,c,d){map.invalidateSize(),setTimeout(function(){map.fitBounds([[a,b],[c,d]])},500)}function loadBar2(){return map.invalidateSize(),$("#loading").show().delay(100).promise()}function addStreetLabels(){var a=Esri_transportation.addTo(map);topPane.appendChild(a.getContainer()),a.setZIndex(2)}function loadSearchBar(){$("#loading").hide();var a=$("#searchbox"),b=$("#searchhome"),c=a[0],d=b[0],e=new Bloodhound({name:"Counties",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:countySearch,limit:10}),f=new Bloodhound({name:"Highways",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:highwaySearch,limit:10}),g=new Bloodhound({name:"NHS",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:nhsSearch,limit:10}),h=new Bloodhound({name:"TruckParking",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:truckParkSearch,limit:10}),i=new Bloodhound({name:"HwyBridges",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:hwyBridgeSearch,limit:10}),j=new Bloodhound({name:"RailLines",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:railSearch,limit:10}),k=new Bloodhound({name:"RailYards",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:railyardSearch,limit:10}),l=new Bloodhound({name:"Intermodal",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:intermodalSearch,limit:10}),m=new Bloodhound({name:"GradeCrossing",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:xingSearch,limit:10}),n=new Bloodhound({name:"RailBridges",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:RailBridgeSearch,limit:10}),o=new Bloodhound({name:"Rivers",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:riverSearch,limit:10}),p=new Bloodhound({name:"PortTerminals",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:portSearch,limit:10}),q=new Bloodhound({name:"Anchorages",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:anchSearch,limit:10}),r=new Bloodhound({name:"CommAirports",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:commairSearch,limit:10}),s=new Bloodhound({name:"ReleivAirports",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:relairSearch,limit:10}),t=new Bloodhound({name:"Heliports",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:heliportSearch,limit:10}),u=new Bloodhound({name:"FCinter",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:FCinterSearch,limit:10}),v=new Bloodhound({name:"FCmajor",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:FCmajorSearch,limit:10}),w=new Bloodhound({name:"FCmega",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name);
},queryTokenizer:Bloodhound.tokenizers.whitespace,local:FCmegaSearch,limit:10}),x=new Bloodhound({name:"GeoNames",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"http://api.geonames.org/searchJSON?username=bootleaf&featureClass=P&maxRows=5&countryCode=US&name_startsWith=%QUERY",filter:function(a){return $.map(a.geonames,function(a){return{name:a.name+", "+a.adminCode1,lat:a.lat,lng:a.lng,source:"GeoNames"}})},ajax:{beforeSend:function(a,b){b.url+="&east="+counties.getBounds().getEast()+"&west="+counties.getBounds().getWest()+"&north="+counties.getBounds().getNorth()+"&south="+counties.getBounds().getSouth(),$("#searchicon").removeClass("fa-search").addClass("fa-refresh fa-spin")},complete:function(a,b){$("#searchicon").removeClass("fa-refresh fa-spin").addClass("fa-search")}}},limit:10});e.initialize(),f.initialize(),h.initialize(),i.initialize(),g.initialize(),j.initialize(),k.initialize(),l.initialize(),m.initialize(),n.initialize(),o.initialize(),p.initialize(),q.initialize(),r.initialize(),s.initialize(),t.initialize(),u.initialize(),v.initialize(),w.initialize(),x.initialize(),$([c,d]).typeahead({minLength:2,highlight:!0,hint:!1},{name:"Counties",displayKey:"name",source:e.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>County</h5>"}},{name:"Highways",displayKey:"name",source:f.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/truck.png' class='searchico'>Highways</h5>"}},{name:"NHS",displayKey:"name",source:g.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/nhs.png' class='searchico'>NHS Connectors</h5>"}},{name:"TruckParking",displayKey:"name",source:h.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/parking.png' class='searchico'>Truck Parking</h5>"}},{name:"HwyBridges",displayKey:"name",source:i.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/bridge2.png' class='searchico'>Highway River Crossings</h5>"}},{name:"RailLines",displayKey:"name",source:j.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/train.png' class='searchico'>Rail Lines</h5>"}},{name:"RailYards",displayKey:"name",source:k.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/railyard.png' class='searchico'>Rail Yards</h5>"}},{name:"Intermodal",displayKey:"name",source:l.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/intermodal.png' class='searchico'>Intermodal Rail Yards</h5>"}},{name:"GradeCrossing",displayKey:"name",source:m.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/gradecrossing.png' class='searchico'>Grade Crossings</h5>"}},{name:"RailBridges",displayKey:"name",source:n.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/bridge1.png' class='searchico'>Rail River Crossing</h5>"}},{name:"Rivers",displayKey:"name",source:o.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/river.png' class='searchico'>River Channels</h5>"}},{name:"PortTerminals",displayKey:"name",source:p.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/ports.png' class='searchico'>Port Terminals</h5>"}},{name:"Anchorages",displayKey:"name",source:q.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/anchor.png' class='searchico'>Anchorages</h5>"}},{name:"CommAirports",displayKey:"name",source:r.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/aiport1.png' class='searchico'>Commercial Airports</h5>"}},{name:"ReleivAirports",displayKey:"name",source:s.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/airport2.png' class='searchico'>Releiver Airports</h5>"}},{name:"Heliports",displayKey:"name",source:t.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/heliport.png' class='searchico'>Heliports</h5>"}},{name:"FCinter",displayKey:"name",source:u.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/17.png' class='searchico'>Intermediate Center</h5>"}},{name:"FCmajor",displayKey:"name",source:v.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/18.png' class='searchico'>Major Center</h5>"}},{name:"FCmega",displayKey:"name",source:w.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/19.png' class='searchico'>Mega Center</h5>"}},{name:"GeoNames",displayKey:"name",source:x.ttAdapter(),templates:{header:"<h4 class='typeahead-header'>Place Results</h4>"}}).on("typeahead:selected",function(a,b){$("#nav_search").hasClass("hidden")&&($("#pFFlanding").fadeOut(800),$("#nav_search").removeClass("hidden"),$("#maplink").addClass("hidden")),"Counties"===b.source&&map.fitBounds(b.bounds),"Highways"===b.source&&(map.hasLayer(freeway)||(map.addLayer(freeway),$("#freeway").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"NHS"===b.source&&(map.hasLayer(nhsgroup)||(map.addLayer(nhsgroup),$("#nhsgroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"TruckParking"===b.source&&(map.hasLayer(trkparkgroup)||(map.addLayer(trkparkgroup),$("#trkparkgroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"HwyBridges"===b.source&&(map.hasLayer(hwyrivcrossing)||(map.addLayer(hwyrivcrossing),$("#hwyrivcrossing").prop("checked",!0)),map.setView([b.lat,b.lng],17),map._layers[b.id]&&map._layers[b.id].fire("click")),"RailLines"===b.source&&(map.hasLayer(railines)||(map.addLayer(railines),$("#railines").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"RailYards"===b.source&&(map.hasLayer(railyardgroup)||(map.addLayer(railyardgroup),$("#railyardgroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Intermodal"===b.source&&(map.hasLayer(intermodalgroup)||(map.addLayer(intermodalgroup),$("#intermodalgroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"GradeCrossing"===b.source&&(map.hasLayer(gradexing)||(map.addLayer(gradexing),$("#gradexing").prop("checked",!0)),map.setView([b.lat,b.lng],17),map._layers[b.id]&&map._layers[b.id].fire("click")),"RailBridges"===b.source&&(map.hasLayer(railbridgept)||(map.addLayer(railbridgept),$("#railbridgept").prop("checked",!0)),map.setView([b.lat,b.lng],17),map._layers[b.id]&&map._layers[b.id].fire("click")),"Rivers"===b.source&&(map.hasLayer(river)||(map.addLayer(river),$("#river").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"PortTerminals"===b.source&&(map.hasLayer(portGroup)||(map.addLayer(portGroup),$("#portGroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Anchorages"===b.source&&(map.hasLayer(anchorageGroup)||(map.addLayer(anchorageGroup),$("#anchorageGroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"CommAirports"===b.source&&(map.hasLayer(commGroup)||(map.addLayer(commGroup),$("#commGroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"ReleivAirports"===b.source&&(map.hasLayer(relGroup)||(map.addLayer(relGroup),$("#relGroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Heliports"===b.source&&(map.hasLayer(heliport)||(map.addLayer(heliport),$("#heliport").prop("checked",!0)),map.setView([b.lat,b.lng],17),map._layers[b.id]&&map._layers[b.id].fire("click")),"FCinter"===b.source&&(map.hasLayer(FCintergroup)||(map.addLayer(FCintergroup),$("#FCintergroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"FCmajor"===b.source&&(map.hasLayer(FCmajorgroup)||(map.addLayer(FCmajorgroup),$("#FCmajorgroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"FCmega"===b.source&&(map.hasLayer(FCmegagroup)||(map.addLayer(FCmegagroup),$("#FCmegagroup").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"GeoNames"===b.source&&map.setView([b.lat,b.lng],14),$(".navbar-collapse").height()>50&&$(".navbar-collapse").collapse("hide")}).on("typeahead:opened",function(){$(".navbar-collapse.in").css("max-height",$(document).height()-$(".navbar-header").height()),$(".navbar-collapse.in").css("height",$(document).height()-$(".navbar-header").height())}).on("typeahead:closed",function(){$(".navbar-collapse.in").css("max-height",""),$(".navbar-collapse.in").css("height","")}),$(".twitter-typeahead").css("position","static"),$(".twitter-typeahead").css("display","block")}function renderLayers(){var a=[];$('input:checkbox[name="LayerCont"]').each(function(){map.removeLayer(window[$(this).attr("id")]),$("#"+$(this).attr("id")).is(":checked")&&a.push({"z-index":$(this).attr("z-index"),layer:$(this)})});var b=sortByKey(a,"z-index");$.each(b,function(){map.addLayer(window[$(this)[0].layer[0].id])})}function loadLayers(){var a=$("#mapLoad").val();"false"===a&&($.getJSON("data/FCinterPoly.js",function(a){FCinterpoly.addData(a)}),polyLayer.push("FCinterpoly"),$.getJSON("data/FCinterPts.js",function(a){FCinterpt.addData(a)}),$.getJSON("data/FCmajorPoly.js",function(a){FCmajorpoly.addData(a)}),polyLayer.push("FCmajorpoly"),$.getJSON("data/FCmajorPts.js",function(a){FCmajorpt.addData(a)}),$.getJSON("data/FCmegaPoly.js",function(a){FCmegapoly.addData(a)}),polyLayer.push("FCmegapoly"),$.getJSON("data/FCmegaPts.js",function(a){FCmegapt.addData(a)}),$.getJSON("data/commPoly.js",function(a){commairpoly.addData(a)}),polyLayer.push("commairpoly"),$.getJSON("data/commPts.js",function(a){commairpt.addData(a)}),$.getJSON("data/releivPoly.js",function(a){relairpoly.addData(a)}),polyLayer.push("relairpoly"),$.getJSON("data/releivPts.js",function(a){relvairpt.addData(a)}),$.getJSON("data/heliports.js",function(a){heliport.addData(a)}),$.getJSON("data/truckparkPoly.js",function(a){truckparkpoly.addData(a)}),polyLayer.push("truckparkpoly"),$.getJSON("data/truckparkPts.js",function(a){tppoints.addData(a)}),$.getJSON("data/hwybrdgPts.js",function(a){hwyrivcrossing.addData(a)}),$.getJSON("data/river.js",function(a){river.addData(a)}),polyLayer.push("river"),$.getJSON("data/portPoly.js",function(a){portpoly.addData(a)}),$.getJSON("data/nhsPts.js",function(a){nhs.addData(a)}),$.getJSON("data/freightrail.js",function(a){railines.addData(a)}),polyLayer.push("railines"),$.getJSON("data/railyardPoly.js",function(a){railyardpoly.addData(a)}),polyLayer.push("railyardpoly"),$.getJSON("data/railyardPts.js",function(a){railyardpt.addData(a)}),$.getJSON("data/intermodalPoly.js",function(a){intermodalpoly.addData(a)}),polyLayer.push("intermodalpoly"),$.getJSON("data/intermodalPts.js",function(a){intermodalpt.addData(a)}),$.getJSON("data/railbrdgPts.js",function(a){railbridge.addData(a)}),polyLayer.push("portpoly"),$.getJSON("data/portPts.js",function(a){porticon.addData(a)}),polyLayer.push("anchoragepoly"),$.getJSON("data/anchPts.js",function(a){anchoricon.addData(a)}),$.getJSON("data/nhsPoly.js",function(a){nhspoly.addData(a)}),polyLayer.push("nhspoly"),$.getJSON("data/highways.js",function(a){freeway.addData(a)}),polyLayer.push("freeway"),$.getJSON("data/anchPoly.js",function(a){anchoragepoly.addData(a)}),$.getJSON("data/pipelines.js",function(a){pipelines.addData(a)}),polyLayer.push("pipelines"),$.getJSON("data/goodneighbor.js",function(a){fgneighbor.addData(a)}),$(".panelinfo").addClass("dynico dynico-info"),$("input#mapLoad").attr("value","true"),$(".legPanel").each(function(){var a=$(this).find("input.layer").length,b=$(this).find("input.layer:checked").length;a==b?($(this).closest(".panel").find(".checked_all").html('<div class="chkicon dynico dynico-check-square-o"></div>'),$(this).closest(".panel-body").append('<input type="hidden" class="Chkd" value="false" />')):($(this).closest(".panel").find(".checked_all").html('<div class="chkicon dynico dynico-square-o"></div>'),$(this).closest(".panel-body").append('<input type="hidden" class="Chkd" value="true" />'));var c=$(this).find(".dynacheck").length;c>0&&$(this).find("input.layer:checked").siblings(".dynacheck").find(".legend-check").html('<i class="dynico dynico-check-square-o"></i>')}),renderLayers(),setTimeout(function(){renderLayers(),loadSearchBar()},3500),setTimeout(function(){renderLayers(),loadSearchBar()},5500))}function setMap(){$(".landingUI").fadeOut("fast","easeOutQuad",function(){$(".mapUI").fadeIn("fast","easeInQuad"),$("#mapDIV").fadeIn("fast","easeInQuad"),loadLayers(),map.invalidateSize(),resetHighlight(),resetInfoWindow(),setTimeout(function(){$("#loading").hide()},300)})}function loadScript(a){$.getScript("lib/tools/"+a+".js")}function getLocationHash(){var a=window.location.hash.substring(1),b=a.split("/");return b[0]}function executeOnLoad(a,b){var c=document.getElementById(a);null!==c?b():setTimeout(function(){executeOnLoad(a,b)},100)}function sortByKey(a,b){return a.sort(function(a,c){var d=a[b],e=c[b];return e>d?-1:d>e?1:0})}function toggleinfo(a){$("#togbtn").hasClass("hide")&&$("#togbtn").removeClass("hide"),$("#togbtn").hasClass("glyphicon-plus")&&$("#togbtn").attr("class","glyphicon glyphicon-minus InfoTgl");var b=document.getElementById("info").offsetHeight+document.getElementById("infoheader").offsetHeight+0;$("#infobox_").addClass("active").css("bottom",b)}function togglemin(a){$("#togbtn").hasClass("glyphicon-plus")||$("#togbtn").attr("class","glyphicon glyphicon-plus InfoTgl"),$("#infobox_").css("bottom",0).removeClass("active")}function initializeHL(a){return resetHighlight(),layersearch=a.feature,void 0===layersearch?(highlightMapFeature(a.target),props=a.target.feature.properties):(highlightMapFeature(a),props=layersearch.properties),props}function contentPush(a,b,c,d,e){document.body.clientWidth<=375?(document.getElementById("mobileheader").innerHTML=a,document.getElementById("mobileinfo").innerHTML=b,document.getElementById("mobilefeatureName").innerHTML=c,document.getElementById("mobileMdHeader").className=""+d+" modal-header",$("#mobileInfo_modal").modal("show")):(document.getElementById("infoheader").innerHTML=a,document.getElementById("info").innerHTML=b,document.getElementById("featureName").innerHTML=c,document.getElementById("featureName").className=""+d,document.getElementById("infoheader").className=""+d,document.getElementById("iconography").className=""+e),toggleinfo(),activateTooltip()}function zoomToFeature(a){map.fitBounds(a.target.getBounds())}function zoomToPoint(a){var b=a.target,c=b.getLatLng();map.setView(c,15)}function zoomToFC(a){var b=a.target,c=b.getLatLng();map.setView(c,13)}function highlightMapFeature(a){var b=a.feature.geometry.type;"Point"!=b?a.setStyle({weight:hlweight,color:""+hlColor}):(iconElem=L.DomUtil.get(a._icon),iconElem.id="preselect",$(iconElem).is("img")?(hlmarkerSize=rdIconSize+8,iconElem.style.border="4px "+hlColor+" solid",iconElem.style.height=hlmarkerSize+"px",iconElem.style.width=hlmarkerSize+"px",iconElem.style.marginTop="-"+hlmarkerSize/2+"px",iconElem.style.marginLeft="-"+hlmarkerSize/2+"px",iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-cm")?($(iconElem).append('<div class="markerBox cm" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-sm")?($(iconElem).append('<div class="markerBox sm" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-md")&&($(iconElem).append('<div class="markerBox md" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"))}function resetHighlight(){for(var a=0,b=polyLayer.length;b>a;a++){var c=polyLayer[a],d=window[c].options.style;window[c].setStyle(d)}resetIconhighlights()}function resetIconhighlights(){var a=document.getElementById("selectedIcon");void 0!=a&&(a.id="prehide",$(".markerBox").remove(),$(iconElem).is("img")?(a.style.border="",a.style.height=rdIconSize+"px",a.style.width=rdIconSize+"px",a.style.marginTop="-"+rdIconSize/2+"px",a.style.marginLeft="-"+rdIconSize/2+"px",a.id=""):a.id="")}function resetInfoWindow(){$("#togbtn").addClass("hide"),$("#infobox_").removeClass("active").css("bottom",0),document.getElementById("featureName").innerHTML="",document.getElementById("infoheader").innerHTML="<p>Click feature to view details</p>",document.getElementById("infoheader").className="",document.getElementById("featureName").className="",document.getElementById("iconography").className="",document.getElementById("info").innerHTML=""}!function(a,b,c){"use strict";L.OpenFreightMarkers={},L.OpenFreightMarkers.version="1.0.0",L.OpenFreightMarkers.Icon=L.Icon.extend({options:{iconSize:[35,46],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],markerSet:"open-freight",mapMarker:"circle-md",iconSet:"dynico",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white",legendMarker:"circle-md",layer:"",title:"",onLoad:!0},initialize:function(a){a=L.Util.setOptions(this,a)},createIcon:function(){var a=b.createElement("div"),c=this.options;return c.icon&&(a.innerHTML=this._createInner()),c.bgPos&&(a.style.backgroundPosition=-c.bgPos.x+"px "+-c.bgPos.y+"px"),this._setIconStyles(a,"icon-"+c.markerColor),a},_createInner:function(){var a,b="",c="",d="",e=this.options;return a=e.icon.slice(0,e.iconSet.length+1)===e.iconSet+"-"?e.icon:e.iconSet+"-"+e.icon,e.spin&&"string"==typeof e.spinClass&&(b=e.spinClass),e.iconColor&&("white"===e.iconColor||"black"===e.iconColor?c="icon-"+e.iconColor:d="style='color: "+e.iconColor+"' "),"<i "+d+"class='"+e.extraClasses+" "+e.iconSet+" "+a+" "+b+" "+c+"'></i>"},_setIconStyles:function(a,b){var c,d,e=this.options;c="circle-sm"===e.mapMarker?"shadow"===b?L.point([30,30]):L.point([28,28]):"circle-md"===e.mapMarker?"shadow"===b?L.point([34,34]):L.point([32,32]):"circle-cm"===e.mapMarker?"shadow"===b?L.point([34,16]):L.point([28,36]):L.point(e["shadow"===b?"shadowSize":"iconSize"]),"shadow"===b?"circle-cm"===e.mapMarker?d=L.point([10,12]):"circle-sm"===e.mapMarker||"circle-md"===e.mapMarker||(d=L.point(e.shadowAnchor||e.iconAnchor)):"circle-cm"===e.mapMarker?d=L.point([14,34]):"circle-sm"===e.mapMarker||"circle-md"===e.mapMarker||(d=L.point(e.iconAnchor)),!d&&c&&(d=c.divideBy(2,!0)),"shadow"===b?a.className=e.mapMarker+"-"+b+" "+e.mapMarker:a.className=e.markerSet+"-"+b+" "+e.mapMarker,d&&(a.style.marginLeft=-d.x+"px",a.style.marginTop=-d.y+"px"),c&&(a.style.width=c.x+"px",a.style.height=c.y+"px")},createShadow:function(){var a=b.createElement("div");return this._setIconStyles(a,"shadow"),a}}),L.createLegend=function(b){a["DynaIcon"+b.layer]=""+b.iconSet+" "+b.iconSet+"-"+b.icon,a["DynaClass"+b.layer]=""+b.markerColor,a["DynaTitle"+b.layer]=""+b.title,"checkbox"===b.legendMarker?$("#"+b.layer+".dyna").wrap('<div class="checkbox" data-toggle="tooltip" title="Click to toggle layer"></div>').after('<label for="'+b.layer+'" class="dynacheck"><div class="legend-check"><i class="dynico dynico-square-o"></i></div> '+b.title+"</label>"):$("#"+b.layer+".dyna").wrap('<div class="checkbox" data-toggle="tooltip" title="Click to toggle layer"></div>').after('<label for="'+b.layer+'"><div class="'+b.legendMarker+" legend-icon "+b.markerSet+"-icon-"+b.markerColor+'"><i class="dynico dynico-'+b.icon+'"></i></div> '+b.title+"</label>"),b.onLoad===!1||$("#"+b.layer+".dyna").attr("checked",!0)},L.OpenFreightMarkers.icon=function(a,b){var c=$.extend({},b,a);return L.createLegend(c),new L.OpenFreightMarkers.Icon(c)}}(this,document),function(a){function b(a){var b=d3.select(a).style("position");return"absolute"===b||"static"===b?{x:a.offsetLeft,y:a.offsetTop,w:a.offsetWidth,h:a.offsetHeight}:{x:0,y:0,w:a.offsetWidth,h:a.offsetHeight}}var c="object"==typeof a.bootstrap?a.bootstrap:a.bootstrap={};c.tooltip=function(){function a(){var a=d3.select(this),b=g.apply(this,arguments),e=a.append("div").attr("class","tooltip");b&&e.classed("fade",!0),e.append("div").attr("class","tooltip-arrow"),e.append("div").attr("class","tooltip-inner");var f=l.apply(this,arguments);e.classed(f,!0),a.on(j,c),a.on(k,d)}function c(){var a,c=d3.select(this),d=i.apply(this,arguments),e=c.select(".tooltip").classed("in",!0),f=h.apply(this,arguments),g=(e.select(".tooltip-inner")[f?"html":"text"](d),l.apply(this,arguments)),j=c.style("position"),k=b(c.node()),m=b(e.node());("absolute"===j||"relative"===j)&&(k.x=k.y=0);var a;switch(g){case"top":a={x:k.x+(k.w-m.w)/2,y:k.y-m.h};break;case"right":a={x:k.x+k.w,y:k.y+(k.h-m.h)/2};break;case"left":a={x:k.x-m.w,y:k.y+(k.h-m.h)/2};break;case"bottom":a={x:Math.max(0,k.x+(k.w-m.w)/2),y:k.y+k.h}}e.style(a?{left:~~a.x+"px",top:~~a.y+"px"}:{left:null,top:null}),this.tooltipVisible=!0}function d(){d3.select(this).select(".tooltip").classed("in",!1),this.tooltipVisible=!1}function e(){this.tooltipVisible?d.apply(this,arguments):c.apply(this,arguments)}var f=function(b){b.each(a)},g=d3.functor(!1),h=d3.functor(!1),i=function(){var a=this.getAttribute("data-original-title");return a?a:(a=this.getAttribute("title"),this.removeAttribute("title"),this.setAttribute("data-original-title",a),a)},j="mouseenter.tooltip",k="mouseleave.tooltip",l=("top left bottom right".split(" "),d3.functor("top"));return f.title=function(a){return arguments.length?(i=d3.functor(a),f):i},f.html=function(a){return arguments.length?(h=d3.functor(a),f):h},f.placement=function(a){return arguments.length?(l=d3.functor(a),f):l},f.show=function(a){a.each(c)},f.hide=function(a){a.each(d)},f.toggle=function(a){a.each(e)},f.destroy=function(a){a.on(j,null).on(k,null).attr("title",function(){return this.getAttribute("data-original-title")||this.getAttribute("title")}).attr("data-original-title",null).select(".tooltip").remove()},f}}(this),!function(a){var b={},c={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};a.fn.bxSlider=function(d){if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).bxSlider(d)}),this;var e={},f=this;b.el=this;var g=a(window).width(),h=a(window).height(),j=function(){e.settings=a.extend({},c,d),e.settings.slideWidth=parseInt(e.settings.slideWidth),e.children=f.children(e.settings.slideSelector),e.children.length<e.settings.minSlides&&(e.settings.minSlides=e.children.length),e.children.length<e.settings.maxSlides&&(e.settings.maxSlides=e.children.length),e.settings.randomStart&&(e.settings.startSlide=Math.floor(Math.random()*e.children.length)),e.active={index:e.settings.startSlide},e.carousel=e.settings.minSlides>1||e.settings.maxSlides>1,e.carousel&&(e.settings.preloadImages="all"),e.minThreshold=e.settings.minSlides*e.settings.slideWidth+(e.settings.minSlides-1)*e.settings.slideMargin,e.maxThreshold=e.settings.maxSlides*e.settings.slideWidth+(e.settings.maxSlides-1)*e.settings.slideMargin,e.working=!1,e.controls={},e.interval=null,e.animProp="vertical"==e.settings.mode?"top":"left",e.usingCSS=e.settings.useCSS&&"fade"!=e.settings.mode&&function(){var a=document.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return e.cssPrefix=b[c].replace("Perspective","").toLowerCase(),e.animProp="-"+e.cssPrefix+"-transform",!0;return!1}(),"vertical"==e.settings.mode&&(e.settings.maxSlides=e.settings.minSlides),f.data("origStyle",f.attr("style")),f.children(e.settings.slideSelector).each(function(){a(this).data("origStyle",a(this).attr("style"))}),k()},k=function(){f.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),e.viewport=f.parent(),e.loader=a('<div class="bx-loading" />'),e.viewport.prepend(e.loader),f.css({width:"horizontal"==e.settings.mode?100*e.children.length+215+"%":"auto",position:"relative"}),e.usingCSS&&e.settings.easing?f.css("-"+e.cssPrefix+"-transition-timing-function",e.settings.easing):e.settings.easing||(e.settings.easing="swing"),q(),e.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),e.viewport.parent().css({maxWidth:o()}),e.settings.pager||e.viewport.parent().css({margin:"0 auto 0px"}),e.children.css({"float":"horizontal"==e.settings.mode?"left":"none",listStyle:"none",position:"relative"}),e.children.css("width",p()),"horizontal"==e.settings.mode&&e.settings.slideMargin>0&&e.children.css("marginRight",e.settings.slideMargin),"vertical"==e.settings.mode&&e.settings.slideMargin>0&&e.children.css("marginBottom",e.settings.slideMargin),"fade"==e.settings.mode&&(e.children.css({position:"absolute",zIndex:0,display:"none"}),e.children.eq(e.settings.startSlide).css({zIndex:50,display:"block"})),e.controls.el=a('<div class="bx-controls" />'),e.settings.captions&&z(),e.active.last=e.settings.startSlide==r()-1,e.settings.video&&f.fitVids();var b=e.children.eq(e.settings.startSlide);"all"==e.settings.preloadImages&&(b=e.children),e.settings.ticker?e.settings.pager=!1:(e.settings.pager&&w(),e.settings.controls&&x(),e.settings.auto&&e.settings.autoControls&&y(),(e.settings.controls||e.settings.autoControls||e.settings.pager)&&e.viewport.after(e.controls.el)),l(b,m)},l=function(b,c){var d=b.find("img, iframe").length;if(0==d)return void c();var e=0;b.find("img, iframe").each(function(){a(this).one("load",function(){++e==d&&c()}).each(function(){this.complete&&a(this).load()})})},m=function(){if(e.settings.infiniteLoop&&"fade"!=e.settings.mode&&!e.settings.ticker){var b="vertical"==e.settings.mode?e.settings.minSlides:e.settings.maxSlides,c=e.children.slice(0,b).clone().addClass("bx-clone"),d=e.children.slice(-b).clone().addClass("bx-clone");f.append(c).prepend(d)}e.loader.remove(),t(),"vertical"==e.settings.mode&&(e.settings.adaptiveHeight=!0),e.viewport.height(n()),f.redrawSlider(),e.settings.onSliderLoad(e.active.index),e.initialized=!0,e.settings.responsive&&a(window).bind("resize",Q),e.settings.auto&&e.settings.autoStart&&J(),e.settings.ticker&&K(),e.settings.pager&&F(e.settings.startSlide),e.settings.controls&&I(),e.settings.touchEnabled&&!e.settings.ticker&&M()},n=function(){var b=0,c=a();if("vertical"==e.settings.mode||e.settings.adaptiveHeight)if(e.carousel){var d=1==e.settings.moveSlides?e.active.index:e.active.index*s();for(c=e.children.eq(d),i=1;i<=e.settings.maxSlides-1;i++)c=d+i>=e.children.length?c.add(e.children.eq(i-1)):c.add(e.children.eq(d+i))}else c=e.children.eq(e.active.index);else c=e.children;return"vertical"==e.settings.mode?(c.each(function(){b+=a(this).outerHeight()}),e.settings.slideMargin>0&&(b+=e.settings.slideMargin*(e.settings.minSlides-1))):b=Math.max.apply(Math,c.map(function(){return a(this).outerHeight(!1)}).get()),b},o=function(){var a="100%";return e.settings.slideWidth>0&&(a="horizontal"==e.settings.mode?e.settings.maxSlides*e.settings.slideWidth+(e.settings.maxSlides-1)*e.settings.slideMargin:e.settings.slideWidth),a},p=function(){var a=e.settings.slideWidth,b=e.viewport.width();return 0==e.settings.slideWidth||e.settings.slideWidth>b&&!e.carousel||"vertical"==e.settings.mode?a=b:e.settings.maxSlides>1&&"horizontal"==e.settings.mode&&(b>e.maxThreshold||b<e.minThreshold&&(a=(b-e.settings.slideMargin*(e.settings.minSlides-1))/e.settings.minSlides)),a},q=function(){var a=1;if("horizontal"==e.settings.mode&&e.settings.slideWidth>0)if(e.viewport.width()<e.minThreshold)a=e.settings.minSlides;else if(e.viewport.width()>e.maxThreshold)a=e.settings.maxSlides;else{var b=e.children.first().width();a=Math.floor(e.viewport.width()/b)}else"vertical"==e.settings.mode&&(a=e.settings.minSlides);return a},r=function(){var a=0;if(e.settings.moveSlides>0)if(e.settings.infiniteLoop)a=e.children.length/s();else for(var b=0,c=0;b<e.children.length;)++a,b=c+q(),c+=e.settings.moveSlides<=q()?e.settings.moveSlides:q();else a=Math.ceil(e.children.length/q());return a},s=function(){return e.settings.moveSlides>0&&e.settings.moveSlides<=q()?e.settings.moveSlides:q()},t=function(){if(e.children.length>e.settings.maxSlides&&e.active.last&&!e.settings.infiniteLoop){if("horizontal"==e.settings.mode){var a=e.children.last(),b=a.position();u(-(b.left-(e.viewport.width()-a.width())),"reset",0)}else if("vertical"==e.settings.mode){var c=e.children.length-e.settings.minSlides,b=e.children.eq(c).position();u(-b.top,"reset",0)}}else{var b=e.children.eq(e.active.index*s()).position();e.active.index==r()-1&&(e.active.last=!0),void 0!=b&&("horizontal"==e.settings.mode?u(-b.left,"reset",0):"vertical"==e.settings.mode&&u(-b.top,"reset",0))}},u=function(a,b,c,d){if(e.usingCSS){var g="vertical"==e.settings.mode?"translate3d(0, "+a+"px, 0)":"translate3d("+a+"px, 0, 0)";f.css("-"+e.cssPrefix+"-transition-duration",c/1e3+"s"),"slide"==b?(f.css(e.animProp,g),f.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),G()})):"reset"==b?f.css(e.animProp,g):"ticker"==b&&(f.css("-"+e.cssPrefix+"-transition-timing-function","linear"),f.css(e.animProp,g),f.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),u(d.resetValue,"reset",0),L()}))}else{var h={};h[e.animProp]=a,"slide"==b?f.animate(h,c,e.settings.easing,function(){G()}):"reset"==b?f.css(e.animProp,a):"ticker"==b&&f.animate(h,speed,"linear",function(){u(d.resetValue,"reset",0),L()})}},v=function(){for(var b="",c=r(),d=0;c>d;d++){var f="";e.settings.buildPager&&a.isFunction(e.settings.buildPager)?(f=e.settings.buildPager(d),e.pagerEl.addClass("bx-custom-pager")):(f=d+1,e.pagerEl.addClass("bx-default-pager")),b+='<div class="bx-pager-item"><a href="" data-slide-index="'+d+'" class="bx-pager-link">'+f+"</a></div>"}e.pagerEl.html(b)},w=function(){e.settings.pagerCustom?e.pagerEl=a(e.settings.pagerCustom):(e.pagerEl=a('<div class="bx-pager" />'),e.settings.pagerSelector?a(e.settings.pagerSelector).html(e.pagerEl):e.controls.el.addClass("bx-has-pager").append(e.pagerEl),v()),e.pagerEl.delegate("a","click",E)},x=function(){e.controls.next=a('<a class="bx-next" href="">'+e.settings.nextText+"</a>"),e.controls.prev=a('<a class="bx-prev" href="">'+e.settings.prevText+"</a>"),e.controls.next.bind("click",A),e.controls.prev.bind("click",B),e.settings.nextSelector&&a(e.settings.nextSelector).append(e.controls.next),e.settings.prevSelector&&a(e.settings.prevSelector).append(e.controls.prev),e.settings.nextSelector||e.settings.prevSelector||(e.controls.directionEl=a('<div class="bx-controls-direction" />'),e.controls.directionEl.append(e.controls.prev).append(e.controls.next),e.controls.el.addClass("bx-has-controls-direction").append(e.controls.directionEl))},y=function(){e.controls.start=a('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+e.settings.startText+"</a></div>"),e.controls.stop=a('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+e.settings.stopText+"</a></div>"),
e.controls.autoEl=a('<div class="bx-controls-auto" />'),e.controls.autoEl.delegate(".bx-start","click",C),e.controls.autoEl.delegate(".bx-stop","click",D),e.settings.autoControlsCombine?e.controls.autoEl.append(e.controls.start):e.controls.autoEl.append(e.controls.start).append(e.controls.stop),e.settings.autoControlsSelector?a(e.settings.autoControlsSelector).html(e.controls.autoEl):e.controls.el.addClass("bx-has-controls-auto").append(e.controls.autoEl),H(e.settings.autoStart?"stop":"start")},z=function(){e.children.each(function(){var b=a(this).find("img:first").attr("title");void 0!=b&&(""+b).length&&a(this).append('<div class="bx-caption"><span>'+b+"</span></div>")})},A=function(a){e.settings.auto&&f.stopAuto(),f.goToNextSlide(),a.preventDefault()},B=function(a){e.settings.auto&&f.stopAuto(),f.goToPrevSlide(),a.preventDefault()},C=function(a){f.startAuto(),a.preventDefault()},D=function(a){f.stopAuto(),a.preventDefault()},E=function(b){e.settings.auto&&f.stopAuto();var c=a(b.currentTarget),d=parseInt(c.attr("data-slide-index"));d!=e.active.index&&f.goToSlide(d),b.preventDefault()},F=function(b){var c=e.children.length;return"short"==e.settings.pagerType?(e.settings.maxSlides>1&&(c=Math.ceil(e.children.length/e.settings.maxSlides)),void e.pagerEl.html(b+1+e.settings.pagerShortSeparator+c)):(e.pagerEl.find("a").removeClass("active"),void e.pagerEl.each(function(c,d){a(d).find("a").eq(b).addClass("active")}))},G=function(){if(e.settings.infiniteLoop){var a="";0==e.active.index?a=e.children.eq(0).position():e.active.index==r()-1&&e.carousel?a=e.children.eq((r()-1)*s()).position():e.active.index==e.children.length-1&&(a=e.children.eq(e.children.length-1).position()),"horizontal"==e.settings.mode?u(-a.left,"reset",0):"vertical"==e.settings.mode&&u(-a.top,"reset",0)}e.working=!1,e.settings.onSlideAfter(e.children.eq(e.active.index),e.oldIndex,e.active.index)},H=function(a){e.settings.autoControlsCombine?e.controls.autoEl.html(e.controls[a]):(e.controls.autoEl.find("a").removeClass("active"),e.controls.autoEl.find("a:not(.bx-"+a+")").addClass("active"))},I=function(){1==r()?(e.controls.prev.addClass("disabled"),e.controls.next.addClass("disabled")):!e.settings.infiniteLoop&&e.settings.hideControlOnEnd&&(0==e.active.index?(e.controls.prev.addClass("disabled"),e.controls.next.removeClass("disabled")):e.active.index==r()-1?(e.controls.next.addClass("disabled"),e.controls.prev.removeClass("disabled")):(e.controls.prev.removeClass("disabled"),e.controls.next.removeClass("disabled")))},J=function(){e.settings.autoDelay>0?setTimeout(f.startAuto,e.settings.autoDelay):f.startAuto(),e.settings.autoHover&&f.hover(function(){e.interval&&(f.stopAuto(!0),e.autoPaused=!0)},function(){e.autoPaused&&(f.startAuto(!0),e.autoPaused=null)})},K=function(){var b=0;if("next"==e.settings.autoDirection)f.append(e.children.clone().addClass("bx-clone"));else{f.prepend(e.children.clone().addClass("bx-clone"));var c=e.children.first().position();b="horizontal"==e.settings.mode?-c.left:-c.top}u(b,"reset",0),e.settings.pager=!1,e.settings.controls=!1,e.settings.autoControls=!1,e.settings.tickerHover&&!e.usingCSS&&e.viewport.hover(function(){f.stop()},function(){var b=0;e.children.each(function(){b+="horizontal"==e.settings.mode?a(this).outerWidth(!0):a(this).outerHeight(!0)});var c=e.settings.speed/b,d="horizontal"==e.settings.mode?"left":"top",g=c*(b-Math.abs(parseInt(f.css(d))));L(g)}),L()},L=function(a){speed=a?a:e.settings.speed;var b={left:0,top:0},c={left:0,top:0};"next"==e.settings.autoDirection?b=f.find(".bx-clone").first().position():c=e.children.first().position();var d="horizontal"==e.settings.mode?-b.left:-b.top,g="horizontal"==e.settings.mode?-c.left:-c.top,h={resetValue:g};u(d,"ticker",speed,h)},M=function(){e.touch={start:{x:0,y:0},end:{x:0,y:0}},e.viewport.bind("touchstart",N)},N=function(a){if(e.working)a.preventDefault();else{e.touch.originalPos=f.position();var b=a.originalEvent;e.touch.start.x=b.changedTouches[0].pageX,e.touch.start.y=b.changedTouches[0].pageY,e.viewport.bind("touchmove",O),e.viewport.bind("touchend",P)}},O=function(a){var b=a.originalEvent,c=Math.abs(b.changedTouches[0].pageX-e.touch.start.x),d=Math.abs(b.changedTouches[0].pageY-e.touch.start.y);if(3*c>d&&e.settings.preventDefaultSwipeX?a.preventDefault():3*d>c&&e.settings.preventDefaultSwipeY&&a.preventDefault(),"fade"!=e.settings.mode&&e.settings.oneToOneTouch){var f=0;if("horizontal"==e.settings.mode){var g=b.changedTouches[0].pageX-e.touch.start.x;f=e.touch.originalPos.left+g}else{var g=b.changedTouches[0].pageY-e.touch.start.y;f=e.touch.originalPos.top+g}u(f,"reset",0)}},P=function(a){e.viewport.unbind("touchmove",O);var b=a.originalEvent,c=0;if(e.touch.end.x=b.changedTouches[0].pageX,e.touch.end.y=b.changedTouches[0].pageY,"fade"==e.settings.mode){var d=Math.abs(e.touch.start.x-e.touch.end.x);d>=e.settings.swipeThreshold&&(e.touch.start.x>e.touch.end.x?f.goToNextSlide():f.goToPrevSlide(),f.stopAuto())}else{var d=0;"horizontal"==e.settings.mode?(d=e.touch.end.x-e.touch.start.x,c=e.touch.originalPos.left):(d=e.touch.end.y-e.touch.start.y,c=e.touch.originalPos.top),!e.settings.infiniteLoop&&(0==e.active.index&&d>0||e.active.last&&0>d)?u(c,"reset",200):Math.abs(d)>=e.settings.swipeThreshold?(0>d?f.goToNextSlide():f.goToPrevSlide(),f.stopAuto()):u(c,"reset",200)}e.viewport.unbind("touchend",P)},Q=function(){var b=a(window).width(),c=a(window).height();(g!=b||h!=c)&&(g=b,h=c,f.redrawSlider())};return f.goToSlide=function(b,c){if(!e.working&&e.active.index!=b)if(e.working=!0,e.oldIndex=e.active.index,e.active.index=0>b?r()-1:b>=r()?0:b,e.settings.onSlideBefore(e.children.eq(e.active.index),e.oldIndex,e.active.index),"next"==c?e.settings.onSlideNext(e.children.eq(e.active.index),e.oldIndex,e.active.index):"prev"==c&&e.settings.onSlidePrev(e.children.eq(e.active.index),e.oldIndex,e.active.index),e.active.last=e.active.index>=r()-1,e.settings.pager&&F(e.active.index),e.settings.controls&&I(),"fade"==e.settings.mode)e.settings.adaptiveHeight&&e.viewport.height()!=n()&&e.viewport.animate({height:n()},e.settings.adaptiveHeightSpeed),e.children.filter(":visible").fadeOut(e.settings.speed).css({zIndex:0}),e.children.eq(e.active.index).css("zIndex",51).fadeIn(e.settings.speed,function(){a(this).css("zIndex",50),G()});else{e.settings.adaptiveHeight&&e.viewport.height()!=n()&&e.viewport.animate({height:n()},e.settings.adaptiveHeightSpeed);var d=0,g={left:0,top:0};if(!e.settings.infiniteLoop&&e.carousel&&e.active.last)if("horizontal"==e.settings.mode){var h=e.children.eq(e.children.length-1);g=h.position(),d=e.viewport.width()-h.outerWidth()}else{var i=e.children.length-e.settings.minSlides;g=e.children.eq(i).position()}else if(e.carousel&&e.active.last&&"prev"==c){var j=1==e.settings.moveSlides?e.settings.maxSlides-s():(r()-1)*s()-(e.children.length-e.settings.maxSlides),h=f.children(".bx-clone").eq(j);g=h.position()}else if("next"==c&&0==e.active.index)g=f.find("> .bx-clone").eq(e.settings.maxSlides).position(),e.active.last=!1;else if(b>=0){var k=b*s();g=e.children.eq(k).position()}if("undefined"!=typeof g){var l="horizontal"==e.settings.mode?-(g.left-d):-g.top;u(l,"slide",e.settings.speed)}}},f.goToNextSlide=function(){if(e.settings.infiniteLoop||!e.active.last){var a=parseInt(e.active.index)+1;f.goToSlide(a,"next")}},f.goToPrevSlide=function(){if(e.settings.infiniteLoop||0!=e.active.index){var a=parseInt(e.active.index)-1;f.goToSlide(a,"prev")}},f.startAuto=function(a){e.interval||(e.interval=setInterval(function(){"next"==e.settings.autoDirection?f.goToNextSlide():f.goToPrevSlide()},e.settings.pause),e.settings.autoControls&&1!=a&&H("stop"))},f.stopAuto=function(a){e.interval&&(clearInterval(e.interval),e.interval=null,e.settings.autoControls&&1!=a&&H("start"))},f.getCurrentSlide=function(){return e.active.index},f.getSlideCount=function(){return e.children.length},f.redrawSlider=function(){e.children.add(f.find(".bx-clone")).outerWidth(p()),e.viewport.css("height",n()),e.settings.ticker||t(),e.active.last&&(e.active.index=r()-1),e.active.index>=r()&&(e.active.last=!0),e.settings.pager&&!e.settings.pagerCustom&&(v(),F(e.active.index))},f.destroySlider=function(){e.initialized&&(e.initialized=!1,a(".bx-clone",this).remove(),e.children.each(function(){void 0!=a(this).data("origStyle")?a(this).attr("style",a(this).data("origStyle")):a(this).removeAttr("style")}),void 0!=a(this).data("origStyle")?this.attr("style",a(this).data("origStyle")):a(this).removeAttr("style"),a(this).unwrap().unwrap(),e.controls.el&&e.controls.el.remove(),e.controls.next&&e.controls.next.remove(),e.controls.prev&&e.controls.prev.remove(),e.pagerEl&&e.pagerEl.remove(),a(".bx-caption",this).remove(),e.controls.autoEl&&e.controls.autoEl.remove(),clearInterval(e.interval),e.settings.responsive&&a(window).unbind("resize",Q))},f.reloadSlider=function(a){void 0!=a&&(d=a),f.destroySlider(),j()},j(),this}}(jQuery),!function(a){if("function"==typeof define&&define.amd)define([],a);else if("object"==typeof exports){var b=require("fs");module.exports=a(),module.exports.css=function(){return b.readFileSync(__dirname+"/nouislider.min.css","utf8")}}else window.noUiSlider=a()}(function(){"use strict";function a(a){return a.filter(function(a){return this[a]?!1:this[a]=!0},{})}function b(a,b){return Math.round(a/b)*b}function c(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.defaultView||c.parentWindow,e=c.documentElement,f=d.pageXOffset;return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(f=0),{top:b.top+d.pageYOffset-e.clientTop,left:b.left+f-e.clientLeft}}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){j(a,b),setTimeout(function(){k(a,b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(a){return Array.isArray(a)?a:[a]}function i(a){var b=a.split(".");return b.length>1?b[1].length:0}function j(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function k(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function l(a,b){a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)}function m(a,b){return 100/(b-a)}function n(a,b){return 100*b/(a[1]-a[0])}function o(a,b){return n(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function p(a,b){return b*(a[1]-a[0])/100+a[0]}function q(a,b){for(var c=1;a>=b[c];)c+=1;return c}function r(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=q(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+o([d,e],c)/m(f,g)}function s(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=q(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],p([d,e],(c-f)*m(f,g))}function t(a,c,d,e){if(100===e)return e;var f,g,h=q(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):c[h-1]?a[h-1]+b(e-a[h-1],c[h-1]):e}function u(a,b,c){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");if(e="min"===a?0:"max"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function v(a,b,c){return b?void(c.xSteps[a]=n([c.xVal[a],c.xVal[a+1]],b)/m(c.xPct[a],c.xPct[a+1])):!0}function w(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)u(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)v(e,this.xNumSteps[e],this)}function x(a,b){if(!d(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function y(a,b){if("object"!=typeof b||Array.isArray(b))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===b.min||void 0===b.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");a.spectrum=new w(b,a.snap,a.dir,a.singleStep)}function z(a,b){if(b=h(b),!Array.isArray(b)||!b.length||b.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");a.handles=b.length,a.start=b}function A(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function B(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function C(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function D(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function E(a,b){if(!d(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function F(a,b){if(!d(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function G(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function H(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0;a.events={tap:c||f,drag:d,fixed:e,snap:f}}function I(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function J(a){var b,c={margin:0,limit:0,animate:!0,format:U};b={step:{r:!1,t:x},start:{r:!0,t:z},connect:{r:!0,t:C},direction:{r:!0,t:G},snap:{r:!1,t:A},animate:{r:!1,t:B},range:{r:!0,t:y},orientation:{r:!1,t:D},margin:{r:!1,t:E},limit:{r:!1,t:F},behaviour:{r:!0,t:H},format:{r:!1,t:I}};var d={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"};return Object.keys(d).forEach(function(b){void 0===a[b]&&(a[b]=d[b])}),Object.keys(b).forEach(function(d){var e=b[d];if(void 0===a[d]){if(e.r)throw new Error("noUiSlider: '"+d+"' is required.");return!0}e.t(c,a[d])}),c.pips=a.pips,c.style=c.ort?"top":"left",c}function K(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function L(a){a.preventDefault();var b,c,d=0===a.type.indexOf("touch"),e=0===a.type.indexOf("mouse"),f=0===a.type.indexOf("pointer"),g=a;return 0===a.type.indexOf("MSPointer")&&(f=!0),d&&(b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),(e||f)&&(b=a.clientX+window.pageXOffset,c=a.clientY+window.pageYOffset),g.points=[b,c],g.cursor=e||f,g}function M(a,b){var c=document.createElement("div"),d=document.createElement("div"),e=["-lower","-upper"];return a&&e.reverse(),j(d,T[3]),j(d,T[3]+e[b]),j(c,T[2]),c.appendChild(d),c}function N(a,b,c){switch(a){case 1:j(b,T[7]),j(c[0],T[6]);break;case 3:j(c[1],T[6]);case 2:j(c[0],T[7]);case 0:j(b,T[6])}}function O(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(c.appendChild(M(b,d)));return e}function P(a,b,c){j(c,T[0]),j(c,T[8+a]),j(c,T[4+b]);var d=document.createElement("div");return j(d,T[1]),c.appendChild(d),d}function Q(b,d){function e(a,b,c){if("range"===a||"steps"===a)return M.xVal;if("count"===a){var d,e=100/(b-1),f=0;for(b=[];(d=f++*e)<=100;)b.push(d);a="positions"}return"positions"===a?b.map(function(a){return M.fromStepping(c?M.getStep(a):a)}):"values"===a?c?b.map(function(a){return M.fromStepping(M.getStep(M.toStepping(a)))}):b:void 0}function m(b,c,d){var e=M.direction,f={},g=M.xVal[0],h=M.xVal[M.xVal.length-1],i=!1,j=!1,k=0;return M.direction=0,d=a(d.slice().sort(function(a,b){return a-b})),d[0]!==g&&(d.unshift(g),i=!0),d[d.length-1]!==h&&(d.push(h),j=!0),d.forEach(function(a,e){var g,h,l,m,n,o,p,q,r,s,t=a,u=d[e+1];if("steps"===c&&(g=M.xNumSteps[e]),g||(g=u-t),t!==!1&&void 0!==u)for(h=t;u>=h;h+=g){for(m=M.toStepping(h),n=m-k,q=n/b,r=Math.round(q),s=n/r,l=1;r>=l;l+=1)o=k+l*s,f[o.toFixed(5)]=["x",0];p=d.indexOf(h)>-1?1:"steps"===c?2:0,!e&&i&&(p=0),h===u&&j||(f[m.toFixed(5)]=[h,p]),k=m}}),M.direction=e,f}function n(a,b,c){function e(a){return["-normal","-large","-sub"][a]}function f(a,b,c){return'class="'+b+" "+b+"-"+h+" "+b+e(c[1])+'" style="'+d.style+": "+a+'%"'}function g(a,d){M.direction&&(a=100-a),d[1]=d[1]&&b?b(d[0],d[1]):d[1],i.innerHTML+="<div "+f(a,"noUi-marker",d)+"></div>",d[1]&&(i.innerHTML+="<div "+f(a,"noUi-value",d)+">"+c.to(d[0])+"</div>")}var h=["horizontal","vertical"][d.ort],i=document.createElement("div");return j(i,"noUi-pips"),j(i,"noUi-pips-"+h),Object.keys(a).forEach(function(b){g(b,a[b])}),i}function o(a){var b=a.mode,c=a.density||1,d=a.filter||!1,f=a.values||!1,g=a.stepped||!1,h=e(b,f,g),i=m(c,b,h),j=a.format||{to:Math.round};return I.appendChild(n(i,d,j))}function p(){return G["offset"+["Width","Height"][d.ort]]}function q(a,b){void 0!==b&&(b=Math.abs(b-d.dir)),Object.keys(R).forEach(function(c){var d=c.split(".")[0];a===d&&R[c].forEach(function(a){a(h(B()),b,r(Array.prototype.slice.call(Q)))})})}function r(a){return 1===a.length?a[0]:d.dir?a.reverse():a}function s(a,b,c,e){var f=function(b){return I.hasAttribute("disabled")?!1:l(I,T[14])?!1:(b=L(b),a===S.start&&void 0!==b.buttons&&b.buttons>1?!1:(b.calcPoint=b.points[d.ort],void c(b,e)))},g=[];return a.split(" ").forEach(function(a){b.addEventListener(a,f,!1),g.push([a,f])}),g}function t(a,b){var c,d,e=b.handles||H,f=!1,g=100*(a.calcPoint-b.start)/p(),h=e[0]===H[0]?0:1;if(c=K(g,b.positions,e.length>1),f=y(e[0],c[h],1===e.length),e.length>1){if(f=y(e[1],c[h?0:1],!1)||f)for(d=0;d<b.handles.length;d++)q("slide",d)}else f&&q("slide",h)}function u(a,b){var c=G.getElementsByClassName(T[15]),d=b.handles[0]===H[0]?0:1;c.length&&k(c[0],T[15]),a.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var e=document.documentElement;e.noUiListeners.forEach(function(a){e.removeEventListener(a[0],a[1])}),k(I,T[12]),q("set",d),q("change",d)}function v(a,b){var c=document.documentElement;if(1===b.handles.length&&(j(b.handles[0].children[0],T[15]),b.handles[0].hasAttribute("disabled")))return!1;a.stopPropagation();var d=s(S.move,c,t,{start:a.calcPoint,handles:b.handles,positions:[J[0],J[H.length-1]]}),e=s(S.end,c,u,{handles:b.handles});if(c.noUiListeners=d.concat(e),a.cursor){document.body.style.cursor=getComputedStyle(a.target).cursor,H.length>1&&j(I,T[12]);var f=function(){return!1};document.body.noUiListener=f,document.body.addEventListener("selectstart",f,!1)}}function w(a){var b,e,g=a.calcPoint,h=0;return a.stopPropagation(),H.forEach(function(a){h+=c(a)[d.style]}),b=h/2>g||1===H.length?0:1,g-=c(G)[d.style],e=100*g/p(),d.events.snap||f(I,T[14],300),H[b].hasAttribute("disabled")?!1:(y(H[b],e),q("slide",b),q("set",b),q("change",b),void(d.events.snap&&v(a,{handles:[H[h]]})))}function x(a){var b,c;if(!a.fixed)for(b=0;b<H.length;b+=1)s(S.start,H[b].children[0],v,{handles:[H[b]]});a.tap&&s(S.start,G,w,{handles:H}),a.drag&&(c=[G.getElementsByClassName(T[7])[0]],j(c[0],T[10]),a.fixed&&c.push(H[c[0]===H[0]?1:0].children[0]),c.forEach(function(a){s(S.start,a,v,{handles:H})}))}function y(a,b,c){var e=a!==H[0]?1:0,f=J[0]+d.margin,h=J[1]-d.margin,i=J[0]+d.limit,l=J[1]-d.limit;return H.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),c!==!1&&d.limit&&H.length>1&&(b=e?Math.min(b,i):Math.max(b,l)),b=M.getStep(b),b=g(parseFloat(b.toFixed(7))),b===J[e]?!1:(a.style[d.style]=b+"%",a.previousSibling||(k(a,T[17]),b>50&&j(a,T[17])),J[e]=b,Q[e]=M.fromStepping(b),q("update",e),!0)}function z(a,b){var c,e,f;for(d.limit&&(a+=1),c=0;a>c;c+=1)e=c%2,f=b[e],null!==f&&f!==!1&&("number"==typeof f&&(f=String(f)),f=d.format.from(f),(f===!1||isNaN(f)||y(H[e],M.toStepping(f),c===3-d.dir)===!1)&&q("update",e))}function A(a){var b,c,e=h(a);for(d.dir&&d.handles>1&&e.reverse(),d.animate&&-1!==J[0]&&f(I,T[14],300),b=H.length>1?3:1,1===e.length&&(b=1),z(b,e),c=0;c<H.length;c++)q("set",c)}function B(){var a,b=[];for(a=0;a<d.handles;a+=1)b[a]=d.format.to(Q[a]);return r(b)}function C(){T.forEach(function(a){a&&k(I,a)}),I.innerHTML="",delete I.noUiSlider}function D(){var a=J.map(function(a,b){var c=M.getApplicableStep(a),d=i(String(c[2])),e=Q[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),h=0===a?null:g>=c[1]?c[2]:c[0]||!1;return[h,f]});return r(a)}function E(a,b){R[a]=R[a]||[],R[a].push(b),"update"===a.split(".")[0]&&H.forEach(function(a,b){q("update",b)})}function F(a){var b=a.split(".")[0],c=a.substring(b.length);Object.keys(R).forEach(function(a){var d=a.split(".")[0],e=a.substring(d.length);b&&b!==d||c&&c!==e||delete R[a]})}var G,H,I=b,J=[-1,-1],M=d.spectrum,Q=[],R={};if(I.noUiSlider)throw new Error("Slider was already initialized.");return G=P(d.dir,d.ort,I),H=O(d.handles,d.dir,G),N(d.connect,I,H),x(d.events),d.pips&&o(d.pips),{destroy:C,steps:D,on:E,off:F,get:B,set:A}}function R(a,b){if(!a.nodeName)throw new Error("noUiSlider.create requires a single element.");var c=J(b,a),d=Q(a,c);d.set(c.start),a.noUiSlider=d}var S=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},T=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];w.prototype.getMargin=function(a){return 2===this.xPct.length?n(this.xVal,a):!1},w.prototype.toStepping=function(a){return a=r(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},w.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(s(this.xVal,this.xPct,a))},w.prototype.getStep=function(a){return this.direction&&(a=100-a),a=t(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},w.prototype.getApplicableStep=function(a){var b=q(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},w.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var U={to:function(a){return a.toFixed(2)},from:Number};return{create:R}}),function(){function a(a){this._value=a}function b(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function c(a,b,c){var d;return d=b.indexOf("$")>-1?e(a,b,c):b.indexOf("%")>-1?f(a,b,c):b.indexOf(":")>-1?g(a,b):i(a._value,b,c)}function d(a,b){var c,d,e,f,g,i=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=h(b);else if(b===o)a._value=0;else{for("."!==m[n].delimiters.decimal&&(b=b.replace(/\./g,"").replace(m[n].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+m[n].abbreviations.thousand+"(?:\\)|(\\"+m[n].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+m[n].abbreviations.million+"(?:\\)|(\\"+m[n].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+m[n].abbreviations.billion+"(?:\\)|(\\"+m[n].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+m[n].abbreviations.trillion+"(?:\\)|(\\"+m[n].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(i.match(c)?Math.pow(10,3):1)*(i.match(d)?Math.pow(10,6):1)*(i.match(e)?Math.pow(10,9):1)*(i.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function e(a,b,c){var d,e=b.indexOf("$")<=1?!0:!1,f="";return b.indexOf(" $")>-1?(f=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(f=" ",b=b.replace("$ ","")):b=b.replace("$",""),d=i(a._value,b,c),e?d.indexOf("(")>-1||d.indexOf("-")>-1?(d=d.split(""),d.splice(1,0,m[n].currency.symbol+f),d=d.join("")):d=m[n].currency.symbol+f+d:d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,f+m[n].currency.symbol),d=d.join("")):d=d+f+m[n].currency.symbol,d}function f(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=i(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function g(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-3600*b)/60),d=Math.round(a._value-3600*b-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function h(a){var b=a.split(":"),c=0;return 3===b.length?(c+=3600*Number(b[0]),c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function i(a,c,d){var e,f,g,h,i,j,k=!1,l=!1,p=!1,q="",r="",s="",t=Math.abs(a),u=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],v="",w=!1;if(0===a&&null!==o)return o;if(c.indexOf("(")>-1?(k=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(l=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1&&(c.indexOf(" a")>-1?(q=" ",c=c.replace(" a","")):c=c.replace("a",""),t>=Math.pow(10,12)?(q+=m[n].abbreviations.trillion,a/=Math.pow(10,12)):t<Math.pow(10,12)&&t>=Math.pow(10,9)?(q+=m[n].abbreviations.billion,a/=Math.pow(10,9)):t<Math.pow(10,9)&&t>=Math.pow(10,6)?(q+=m[n].abbreviations.million,a/=Math.pow(10,6)):t<Math.pow(10,6)&&t>=Math.pow(10,3)&&(q+=m[n].abbreviations.thousand,a/=Math.pow(10,3))),c.indexOf("b")>-1)for(c.indexOf(" b")>-1?(r=" ",c=c.replace(" b","")):c=c.replace("b",""),g=0;g<=u.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){r+=u[g],e>0&&(a/=e);break}return c.indexOf("o")>-1&&(c.indexOf(" o")>-1?(s=" ",c=c.replace(" o","")):c=c.replace("o",""),s+=m[n].ordinal(a)),c.indexOf("[.]")>-1&&(p=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],j=c.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),v=b(a,i[0].length+i[1].length,d,i[1].length)):v=b(a,i.length,d),h=v.split(".")[0],v=v.split(".")[1].length?m[n].delimiters.decimal+v.split(".")[1]:"",p&&0===Number(v.slice(1))&&(v="")):h=b(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),w=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m[n].delimiters.thousands)),0===c.indexOf(".")&&(h=""),(k&&w?"(":"")+(!k&&w?"-":"")+(!w&&l?"+":"")+h+v+(s?s:"")+(q?q:"")+(r?r:"")+(k&&w?")":"")}function j(a,b){m[a]=b}var k,l="1.5.2",m={},n="en",o=null,p="0,0",q="undefined"!=typeof module&&module.exports;k=function(b){return k.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=k.fn.unformat(b)),new a(Number(b))},k.version=l,k.isNumeral=function(b){return b instanceof a},k.language=function(a,b){if(!a)return n;if(a&&!b){if(!m[a])throw new Error("Unknown language : "+a);n=a}return(b||!m[a])&&j(a,b),k},k.languageData=function(a){if(!a)return m[n];if(!m[a])throw new Error("Unknown language : "+a);return m[a]},k.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),k.zeroFormat=function(a){o="string"==typeof a?a:null},k.defaultFormat=function(a){p="string"==typeof a?a:"0.0"},k.fn=a.prototype={clone:function(){return k(this)},format:function(a,b){return c(this,a?a:p,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:d(this,a?a:p)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){return this._value=this._value+Number(a),this},subtract:function(a){return this._value=this._value-Number(a),this},multiply:function(a){return this._value=this._value*Number(a),this},divide:function(a){return this._value=this._value/Number(a),this},difference:function(a){var b=this._value-Number(a);return 0>b&&(b=-b),b}},q&&(module.exports=k),"undefined"==typeof ender&&(this.numeral=k),"function"==typeof define&&define.amd&&define([],function(){return k})}.call(this),function(a){function b(a,b){return"function"==typeof a?a.call(b):a}function c(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()}c.prototype={show:function(){var c=this.getTitle();if(c&&this.enabled){var d=this.tip();d.find(".tipsy-inner")[this.options.html?"html":"text"](c),d[0].className="tipsy",d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var e=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});if("object"==typeof this.$element[0].nearestViewportElement){var f=this.$element[0],g=f.getBoundingClientRect();e.width=g.width,e.height=g.height}var h,i=d[0].offsetWidth,j=d[0].offsetHeight,k=b(this.options.gravity,this.$element[0]);switch(k.charAt(0)){case"n":h={top:e.top+e.height+this.options.offset,left:e.left+e.width/2-i/2};break;case"s":h={top:e.top-j-this.options.offset,left:e.left+e.width/2-i/2};break;case"e":h={top:e.top+e.height/2-j/2,left:e.left-i-this.options.offset};break;case"w":h={top:e.top+e.height/2-j/2,left:e.left+e.width+this.options.offset}}2==k.length&&("w"==k.charAt(1)?h.left=e.left+e.width/2-15:h.left=e.left+e.width/2-i+15),d.css(h).addClass("tipsy-"+k),d.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+k.charAt(0),this.options.className&&d.addClass(b(this.options.className,this.$element[0])),this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity});var l=this,m=function(a){return function(){l.$tip.stop(),l.tipHovered=a,a||(0===l.options.delayOut?l.hide():setTimeout(function(){"out"==l.hoverState&&l.hide()},l.options.delayOut))}};d.hover(m(!0),m(!1))}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("original-title"))&&a.attr("original-title",a.attr("title")||"").removeAttr("title"),"object"==typeof a.context.nearestViewportElement&&a.children("title").length&&a.append("<original-title>"+(a.children("title").text()||"")+"</original-title>").children("title").remove()},getTitle:function(){var a,b=this.$element,c=this.options;if(this.fixTitle(),"string"==typeof c.title){var d="title"==c.title?"original-title":c.title;a=b.children(d).length?b.children(d).html():b.attr(d)}else"function"==typeof c.title&&(a=c.title.call(b[0]));return a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.tipsy=function(b){function d(d){var e=a.data(d,"tipsy");return e||(e=new c(d,a.fn.tipsy.elementOptions(d,b)),a.data(d,"tipsy",e)),e}function e(){var a=d(this);a.hoverState="in",0===b.delayIn?a.show():(a.fixTitle(),setTimeout(function(){"in"==a.hoverState&&a.show()},b.delayIn))}function f(){var a=d(this);if(a.hoverState="out",0===b.delayOut)a.hide();else{var c=function(){a.tipHovered&&b.hoverlock||"out"==a.hoverState&&a.hide()};setTimeout(c,b.delayOut)}}if(b===!0)return this.data("tipsy");if("string"==typeof b){var g=this.data("tipsy");return g&&g[b](),this}if(b=a.extend({},a.fn.tipsy.defaults,b),b.hoverlock&&0===b.delayOut&&(b.delayOut=100),"manual"!=b.trigger){var h=b.live?"live":"bind",i="hover"==b.trigger?"mouseenter":"focus",j="hover"==b.trigger?"mouseleave":"blur";this[h](i,e)[h](j,f)}return this},a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,
fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",hoverlock:!1},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(b,c){return function(){var d={ns:c[0],ew:c.length>1?c[1]:!1},e=a(document).scrollTop()+b,f=a(document).scrollLeft()+b,g=a(this);return g.offset().top<e&&(d.ns="n"),g.offset().left<f&&(d.ew="w"),a(window).width()+a(document).scrollLeft()-g.offset().left<b&&(d.ew="e"),a(window).height()+a(document).scrollTop()-g.offset().top<b&&(d.ns="s"),d.ns+(d.ew?d.ew:"")}}}(jQuery),!function(a){var b=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},noop:function(){}}}(),c="0.10.5",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){return function(){var c=[].slice.call(arguments,0);return function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,obj:{nonword:d(c),whitespace:d(a)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key]),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];return b?(this.list.moveToFront(b),b.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function a(a){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix))}function c(){return(new Date).getTime()}function d(a){return JSON.stringify(b.isUndefined(a)?null:a)}function e(a){return JSON.parse(a)}var f,g;try{f=window.localStorage,f.setItem("~~~","!"),f.removeItem("~~~")}catch(h){f=null}return g=f&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){return this.isExpired(a)&&this.remove(a),e(f.getItem(this._prefix(a)))},set:function(a,e,g){return b.isNumber(g)?f.setItem(this._ttlKey(a),d(c()+g)):f.removeItem(this._ttlKey(a)),f.setItem(this._prefix(a),d(e))},remove:function(a){return f.removeItem(this._ttlKey(a)),f.removeItem(this._prefix(a)),this},clear:function(){var a,b,c=[],d=f.length;for(a=0;d>a;a++)(b=f.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){var d=e(f.getItem(this._ttlKey(a)));return b.isNumber(d)&&c()>d?!0:!1}}:{get:b.noop,set:b.noop,remove:b.noop,clear:b.noop,isExpired:b.noop},b.mixin(a.prototype,g),a}(),g=function(){"use strict";function c(b){b=b||{},this.cancelled=!1,this.lastUrl=null,this._send=b.transport?d(b.transport):a.ajax,this._get=b.rateLimiter?b.rateLimiter(this._get):this._get,this._cache=b.cache===!1?new e(0):i}function d(c){return function(d,e){function f(a){b.defer(function(){h.resolve(a)})}function g(a){b.defer(function(){h.reject(a)})}var h=a.Deferred();return c(d,e,f,g),h}}var f=0,g={},h=6,i=new e(10);return c.setMaxPendingRequests=function(a){h=a},c.resetCache=function(){i.reset()},b.mixin(c.prototype,{_get:function(a,b,c){function d(b){c&&c(null,b),k._cache.set(a,b)}function e(){c&&c(!0)}function i(){f--,delete g[a],k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var j,k=this;this.cancelled||a!==this.lastUrl||((j=g[a])?j.done(d).fail(e):h>f?(f++,g[a]=this._send(a,b).done(d).fail(e).always(i)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(a,c,d){var e;return b.isFunction(c)&&(d=c,c={}),this.cancelled=!1,this.lastUrl=a,(e=this._cache.get(a))?b.defer(function(){d&&d(null,e)}):this._get(a,c,d),!!e},cancel:function(){this.cancelled=!0}}),c}(),h=function(){"use strict";function c(b){b=b||{},b.datumTokenizer&&b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=b.datumTokenizer,this.queryTokenizer=b.queryTokenizer,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){return{ids:[],children:{}}}function f(a){for(var b={},c=[],d=0,e=a.length;e>d;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){function c(a,b){return a-b}var d=0,e=0,f=[];a=a.sort(c),b=b.sort(c);for(var g=a.length,h=b.length;g>d&&h>e;)a[d]<b[e]?d++:a[d]>b[e]?e++:(f.push(a[d]),d++,e++);return f}return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;f=c.datums.push(a)-1,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b.children[g]||(b.children[g]=e()),b.ids.push(f)})})},get:function(a){var c,e,h=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=h.trie,c=a.split("");b&&(d=c.shift());)b=b.children[d];return b&&0===c.length?(f=b.ids.slice(0),void(e=e?g(e,f):f)):(e=[],!1)}),e?b.map(f(e),function(a){return h.datums[a]}):[]},reset:function(){this.datums=[],this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function d(a){return a.local||null}function e(d){var e,f;return f={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(e=d.prefetch||null)&&(e=b.isString(e)?{url:e}:e,e=b.mixin(f,e),e.thumbprint=c+e.thumbprint,e.ajax.type=e.ajax.type||"GET",e.ajax.dataType=e.ajax.dataType||"json",!e.url&&a.error("prefetch requires url to be set")),e}function f(c){function d(a){return function(c){return b.debounce(c,a)}}function e(a){return function(c){return b.throttle(c,a)}}var f,g;return g={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(f=c.remote||null)&&(f=b.isString(f)?{url:f}:f,f=b.mixin(g,f),f.rateLimiter=/^throttle$/i.test(f.rateLimitBy)?e(f.rateLimitWait):d(f.rateLimitWait),f.ajax.type=f.ajax.type||"GET",f.ajax.dataType=f.ajax.dataType||"json",delete f.rateLimitBy,delete f.rateLimitWait,!f.url&&a.error("remote requires url to be set")),f}return{local:d,prefetch:e,remote:f}}();!function(c){"use strict";function e(b){b&&(b.local||b.prefetch||b.remote)||a.error("one of local, prefetch, or remote is required"),this.limit=b.limit||5,this.sorter=j(b.sorter),this.dupDetector=b.dupDetector||k,this.local=i.local(b),this.prefetch=i.prefetch(b),this.remote=i.remote(b),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new h({datumTokenizer:b.datumTokenizer,queryTokenizer:b.queryTokenizer}),this.storage=this.cacheKey?new f(this.cacheKey):null}function j(a){function c(b){return b.sort(a)}function d(a){return a}return b.isFunction(a)?c:d}function k(){return!1}var l,m;return l=c.Bloodhound,m={data:"data",protocol:"protocol",thumbprint:"thumbprint"},c.Bloodhound=e,e.noConflict=function(){return c.Bloodhound=l,e},e.tokenizers=d,b.mixin(e.prototype,{_loadPrefetch:function(b){function c(a){f.clear(),f.add(b.filter?b.filter(a):a),f._saveToStorage(f.index.serialize(),b.thumbprint,b.ttl)}var d,e,f=this;return(d=this._readFromStorage(b.thumbprint))?(this.index.bootstrap(d),e=a.Deferred().resolve()):e=a.ajax(b.url,b.ajax).done(c),e},_getFromRemote:function(a,b){function c(a,c){b(a?[]:f.remote.filter?f.remote.filter(c):c)}var d,e,f=this;return this.transport?(a=a||"",e=encodeURIComponent(a),d=this.remote.replace?this.remote.replace(this.remote.url,a):this.remote.url.replace(this.remote.wildcard,e),this.transport.get(d,this.remote.ajax,c)):void 0},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(a,b,c){this.storage&&(this.storage.set(m.data,a,c),this.storage.set(m.protocol,location.protocol,c),this.storage.set(m.thumbprint,b,c))},_readFromStorage:function(a){var b,c={};return this.storage&&(c.data=this.storage.get(m.data),c.protocol=this.storage.get(m.protocol),c.thumbprint=this.storage.get(m.thumbprint)),b=c.thumbprint!==a||c.protocol!==location.protocol,c.data&&!b?c.data:null},_initialize:function(){function c(){e.add(b.isFunction(f)?f():f)}var d,e=this,f=this.local;return d=this.prefetch?this._loadPrefetch(this.prefetch):a.Deferred().resolve(),f&&d.done(c),this.transport=this.remote?new g(this.remote):null,this.initPromise=d.promise()},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){this.index.add(a)},get:function(a,c){function d(a){var d=f.slice(0);b.each(a,function(a){var c;return c=b.some(d,function(b){return e.dupDetector(a,b)}),!c&&d.push(a),d.length<e.limit}),c&&c(e.sorter(d))}var e=this,f=[],g=!1;f=this.index.get(a),f=this.sorter(f).slice(0,this.limit),f.length<this.limit?g=this._getFromRemote(a,d):this._cancelLastRemoteRequest(),g||(f.length>0||!this.transport)&&c&&c(f)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&g.resetCache()},ttAdapter:function(){return b.bind(this.get,this)}}),e}(this);var j=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),k=function(){"use strict";var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),b.isMsie()&&b.isMsie()<=7&&b.mixin(a.input,{marginTop:"-1px"}),a}(),l=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d="typeahead:";return b.mixin(c.prototype,{trigger:function(a){var b=[].slice.call(arguments,1);this.$el.trigger(d+a,b)}}),c}(),m=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&f>e;e+=1)d=a[e].apply(b,c)===!1;return!d}return d}function g(){var a;return a=window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),n=function(a){"use strict";function c(a,c,d){for(var e,f=[],g=0,h=a.length;h>g;g++)f.push(b.escapeRegExChars(a[g]));return e=d?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")",c?new RegExp(e):new RegExp(e,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d,f;return(c=h.exec(b.data))&&(f=a.createElement(e.tagName),e.className&&(f.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),f.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(f,d)),!!c}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e),e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),o=function(){"use strict";function c(c){var e,f,h,i,j=this;c=c||{},c.input||a.error("input is missing"),e=b.bind(this._onBlur,this),f=b.bind(this._onFocus,this),h=b.bind(this._onKeydown,this),i=b.bind(this._onInput,this),this.$hint=a(c.hint),this.$input=a(c.input).on("blur.tt",e).on("focus.tt",f).on("keydown.tt",h),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop),b.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){g[a.which||a.keyCode]||b.defer(b.bind(j._onInput,j,a))}):this.$input.on("input.tt",i),this.query=this.$input.val(),this.$overflowHelper=d(this.$input)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function e(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function f(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var g;return g={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,m,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(a){var b=g[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(a,b){var c,d,e;switch(a){case"tab":d=this.getHint(),e=this.getInputValue(),c=d&&d!==e&&!f(b);break;case"up":case"down":c=!f(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!f(b);break;default:c=!0}return c},_checkInputValue:function(){var a,b,c;a=this.getInputValue(),b=e(a,this.query),c=b?this.query.length!==a.length:!1,this.query=a,b?c&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a),b?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c,d;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),d=""!==a&&c&&!this.hasOverflow(),!d&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),c}(),p=function(){"use strict";function c(c){c=c||{},c.templates=c.templates||{},c.source||a.error("missing source"),c.name&&!f(c.name)&&a.error("invalid dataset name: "+c.name),this.query=null,this.highlight=!!c.highlight,this.name=c.name||b.getUniqueId(),this.source=c.source,this.displayFn=d(c.display||c.displayKey),this.templates=e(c.templates,this.displayFn),this.$el=a(j.dataset.replace("%CLASS%",this.name))}function d(a){function c(b){return b[a]}return a=a||"value",b.isFunction(a)?a:c}function e(a,c){function d(a){return"<p>"+c(a)+"</p>"}return{empty:a.empty&&b.templatify(a.empty),header:a.header&&b.templatify(a.header),footer:a.footer&&b.templatify(a.footer),suggestion:a.suggestion||d}}function f(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var g="ttDataset",h="ttValue",i="ttDatum";return c.extractDatasetName=function(b){return a(b).data(g)},c.extractValue=function(b){return a(b).data(h)},c.extractDatum=function(b){return a(b).data(i)},b.mixin(c.prototype,m,{_render:function(c,d){function e(){return p.templates.empty({query:c,isEmpty:!0})}function f(){function e(b){var c;return c=a(j.suggestion).append(p.templates.suggestion(b)).data(g,p.name).data(h,p.displayFn(b)).data(i,b),c.children().each(function(){a(this).css(k.suggestionChild)}),c}var f,l;return f=a(j.suggestions).css(k.suggestions),l=b.map(d,e),f.append.apply(f,l),p.highlight&&n({className:"tt-highlight",node:f[0],pattern:c}),f}function l(){return p.templates.header({query:c,isEmpty:!o})}function m(){return p.templates.footer({query:c,isEmpty:!o})}if(this.$el){var o,p=this;this.$el.empty(),o=d&&d.length,!o&&this.templates.empty?this.$el.html(e()).prepend(p.templates.header?l():null).append(p.templates.footer?m():null):o&&this.$el.html(f()).prepend(p.templates.header?l():null).append(p.templates.footer?m():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(a){function b(b){c.canceled||a!==c.query||c._render(a,b)}var c=this;this.query=a,this.canceled=!1,this.source(a,b)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),c}(),q=function(){"use strict";function c(c){var e,f,g,h=this;c=c||{},c.menu||a.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=b.map(c.datasets,d),e=b.bind(this._onSuggestionClick,this),f=b.bind(this._onSuggestionMouseEnter,this),g=b.bind(this._onSuggestionMouseLeave,this),this.$menu=a(c.menu).on("click.tt",".tt-suggestion",e).on("mouseenter.tt",".tt-suggestion",f).on("mouseleave.tt",".tt-suggestion",g),b.each(this.datasets,function(a){h.$menu.append(a.getRoot()),a.onSync("rendered",h._onRendered,h)})}function d(a){return new p(a)}return b.mixin(c.prototype,m,{_onSuggestionClick:function(b){this.trigger("suggestionClicked",a(b.currentTarget))},_onSuggestionMouseEnter:function(b){this._removeCursor(),this._setCursor(a(b.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function a(a){return a.isEmpty()}this.isEmpty=b.every(this.datasets,a),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(a,b){a.first().addClass("tt-cursor"),!b&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(a){var b,c,d,e;if(this.isOpen){if(c=this._getCursor(),b=this._getSuggestions(),this._removeCursor(),d=b.index(c)+a,d=(d+1)%(b.length+1)-1,-1===d)return void this.trigger("cursorRemoved");-1>d&&(d=b.length-1),this._setCursor(e=b.eq(d)),this._ensureVisible(e)}},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$menu.scrollTop(),e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>b?this.$menu.scrollTop(d+b):c>e&&this.$menu.scrollTop(d+(c-e))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){this.$menu.css("ltr"===a?k.ltr:k.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(a){var b=null;return a.length&&(b={raw:p.extractDatum(a),value:p.extractValue(a),datasetName:p.extractDatasetName(a)}),b},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(a){function c(b){b.update(a)}b.each(this.datasets,c)},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function a(a){a.destroy()}this.$menu.off(".tt"),this.$menu=null,b.each(this.datasets,a)}}),c}(),r=function(){"use strict";function c(c){var e,f,g;c=c||{},c.input||a.error("missing input"),this.isActivated=!1,this.autoselect=!!c.autoselect,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.$node=d(c.input,c.withHint),e=this.$node.find(".tt-dropdown-menu"),f=this.$node.find(".tt-input"),g=this.$node.find(".tt-hint"),f.on("blur.tt",function(a){var c,d,g;c=document.activeElement,d=e.is(c),g=e.has(c).length>0,b.isMsie()&&(d||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){f.focus()}))}),e.on("mousedown.tt",function(a){a.preventDefault()}),this.eventBus=c.eventBus||new l({el:f}),this.dropdown=new q({menu:e,datasets:c.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new o({input:f,hint:g}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function d(b,c){var d,f,h,i;d=a(b),f=a(j.wrapper).css(k.wrapper),h=a(j.dropdown).css(k.dropdown),i=d.clone().css(k.hint).css(e(d)),i.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),d.data(g,{dir:d.attr("dir"),autocomplete:d.attr("autocomplete"),spellcheck:d.attr("spellcheck"),style:d.attr("style")}),d.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(c?k.input:k.inputWithNoHint);try{!d.attr("dir")&&d.attr("dir","auto")}catch(l){}return d.wrap(f).parent().prepend(c?i:null).append(h)}function e(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function f(a){var c=a.find(".tt-input");b.each(c.data(g),function(a,d){b.isUndefined(a)?c.removeAttr(d):c.attr(d,a)}),c.detach().removeData(g).removeClass("tt-input").insertAfter(a),a.remove()}var g="ttAttrs";return b.mixin(c.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.setInputValue(a.value,!0),this.eventBus.trigger("cursorchanged",a.raw,a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(a,b){var c,d;c=this.dropdown.getDatumForCursor(),d=this.dropdown.getDatumForTopSuggestion(),c?(this._select(c),b.preventDefault()):this.autoselect&&d&&(this._select(d),b.preventDefault())},_onTabKeyed:function(a,b){var c;(c=this.dropdown.getDatumForCursor())?(this._select(c),b.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHintIfInvalid(),b.length>=this.minLength?this.dropdown.update(b):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,c,d,e,f,g;a=this.dropdown.getDatumForTopSuggestion(),a&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(c=this.input.getInputValue(),d=o.normalizeQuery(c),e=b.escapeRegExChars(d),f=new RegExp("^(?:"+e+")(.+$)","i"),g=f.exec(a.value),g?this.input.setHint(c+g[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(a){var b,c,d,e;b=this.input.getHint(),c=this.input.getQuery(),d=a||this.input.isCursorAtEnd(),b&&c!==b&&d&&(e=this.dropdown.getDatumForTopSuggestion(),e&&this.input.setInputValue(e.value),this.eventBus.trigger("autocompleted",e.raw,e.datasetName))},_select:function(a){this.input.setQuery(a.value),this.input.setInputValue(a.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",a.raw,a.datasetName),this.dropdown.close(),b.defer(b.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(a){a=b.toStr(a),this.isActivated?this.input.setInputValue(a):(this.input.setQuery(a),this.input.setInputValue(a,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),f(this.$node),this.$node=null}}),c}();!function(){"use strict";var c,d,e;c=a.fn.typeahead,d="ttTypeahead",e={initialize:function(c,e){function f(){var f,g,h=a(this);b.each(e,function(a){a.highlight=!!c.highlight}),g=new r({input:h,eventBus:f=new l({el:h}),withHint:b.isUndefined(c.hint)?!0:!!c.hint,minLength:c.minLength,autoselect:c.autoselect,datasets:e}),h.data(d,g)}return e=b.isArray(e)?e:[].slice.call(arguments,1),c=c||{},this.each(f)},open:function(){function b(){var b,c=a(this);(b=c.data(d))&&b.open()}return this.each(b)},close:function(){function b(){var b,c=a(this);(b=c.data(d))&&b.close()}return this.each(b)},val:function(b){function c(){var c,e=a(this);(c=e.data(d))&&c.setVal(b)}function e(a){var b,c;return(b=a.data(d))&&(c=b.getVal()),c}return arguments.length?this.each(c):e(this.first())},destroy:function(){function b(){var b,c=a(this);(b=c.data(d))&&(b.destroy(),c.removeData(d))}return this.each(b)}},a.fn.typeahead=function(b){var c;return e[b]&&"initialize"!==b?(c=this.filter(function(){return!!a(this).data(d)}),e[b].apply(c,[].slice.call(arguments,1))):e.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this}}()}(window.jQuery);var hlweight=7,hlColor="#00CCFF",layersearch,props,header,content,featureName,featureClass,featureIcon;serialize=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};var dataID,dwnID,dwnName,dwnFile,dwnDate,baseURL=window.location.href.split("#")[0],dataURL=baseURL+"data/download/dataUpdates.js",sandboxURL=baseURL.substring(0,baseURL.length-10)+"/data/download/dataUpdates.js";$.getJSON(dataURL,function(a){for(var b=0;b<a.length;b++)dwnID=a[b].id,dwnName=a[b].name,dwnFile=a[b].filename,dwnDate=a[b].date,$(".dataDwnld-"+dwnID).append('<div class="right dl"><div class="noLink">Last Update: '+dwnDate+'</div><div class="noLink">Download: </div><a class="dlLink" href="http://dvrpcfreight.github.io/phillyfreightfinder/data/download/'+dwnFile+'.zip" data-toggle="tooltip" title="Download Shapefile" >shp</a><a class="dlLink" href="http://dvrpcfreight.github.io/phillyfreightfinder/data/download/'+dwnFile+'.csv" data-toggle="tooltip" title="Download CSV" >csv</a><a class="dlLink" href="http://dvrpcfreight.github.io/phillyfreightfinder/data/download/'+dwnFile+'.json" download="'+dwnFile+'.json" data-toggle="tooltip" title="Download JSON" >json</a></div>'),$('[data-toggle="tooltip"]').tooltip()}),$(".tocLink").on("click",function(){var a=$(this).attr("val"),b=document.getElementById(a);b.scrollIntoView(!0)}),$(document).ready(function(){$('a[href="#"]').click(function(a){a.preventDefault()}),Highcharts.setOptions({chart:{type:"pie",backgroundColor:"#396AB2"},title:{verticalAlign:"middle",align:"center",floating:!0,useHTML:!0},yAxis:{title:{text:""
}},credits:{enabled:!1},plotOptions:{pie:{shadow:!1,dataLabels:{enabled:!1},borderColor:"#335e9f",borderWidth:0,colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"]}},series:[{size:"230%",innerSize:"130%"}]}),$.getJSON("data/valueRegion.json",function(a){for(var b=[],c=[],d=a.region,e=d.length,f=0;e>f;f++)b.push({name:d[f].type,y:d[f].value}),c.push({name:d[f].type,y:d[f].tons});new Highcharts.Chart({chart:{renderTo:"containerValue"},title:{text:'<div style="text-align:center;line-height: 0.8;"><span class="chartPrefix">by</span><br><span class="chartLabel">VALUE</span></div>',y:-55},tooltip:{formatter:function(){return"<b>"+this.key+"</b><br/><b>$"+this.y+"</b> billion<br/>"+Math.round(100*this.percentage)/100+"%"}},plotOptions:{pie:{center:["50%","-15%"],colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],startAngle:90,endAngle:270}},series:[{id:"Values",name:"Value",size:"230%",innerSize:"130%",data:b}]}),new Highcharts.Chart({chart:{renderTo:"containerTon"},title:{text:'<div style="text-align:center;line-height: 0.8;"><span class="chartPrefix">by</span><br><span class="chartLabel">TONNAGE</span></div>',y:55},tooltip:{formatter:function(){return"<b>"+this.key+"</b><br/><b>"+this.y+"</b> tons<br/>"+Math.round(100*this.percentage)/100+"%"}},plotOptions:{pie:{center:["50%","120%"],colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],startAngle:-90,endAngle:90}},series:[{id:"Tons",name:"Ton",size:"230%",innerSize:"130%",data:c}]})})});var oLat=40.018,oLng=-75.148,zLevel=9,map,map2,countySearch=[],polyLayer=[],highwaySearch=[],truckParkSearch=[],nhsSearch=[],hwyBridgeSearch=[],railSearch=[],railyardSearch=[],intermodalSearch=[],RailBridgeSearch=[],xingSearch=[],riverSearch=[],portSearch=[],anchSearch=[],commairSearch=[],relairSearch=[],heliportSearch=[],FCinterSearch=[],FCmajorSearch=[],FCmegaSearch=[],mcountyPrint=[],Stamen_TonerBackground=L.tileLayer("http://{s}.tile.stamen.com/toner-background/{z}/{x}/{y}.png",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',subdomains:"abcd",opacity:0});countymap=L.map("map2",{minZoom:8,maxZoom:8,dragging:!1,zoomControl:!1,boxZoom:!1,doubleClickZoom:!1,touchZoom:!1,layers:[Stamen_TonerBackground]});var mcounty=L.geoJson(null,{style:{color:"#efefef",weight:4,fillColor:"#396ab2",opacity:1,fillOpacity:1},onEachFeature:function(a,b){b.on({mouseover:displayCountyname,mouseout:clearCountyname,click:populateCounty})}});$.getJSON("data/county5k.js",function(a){mcounty.addData(a)}).complete(function(){countymap.fitBounds(mcounty.getBounds())});var Esri_WorldImagery=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Esri_transportation=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",{minZoom:8,maxZoom:18}),Acetate_all=L.tileLayer("http://a{s}.acetate.geoiq.com/tiles/acetate-hillshading/{z}/{x}/{y}.png",{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:"0123",minZoom:2,maxZoom:18}),map=L.map("mapDIV",{minZoom:zLevel,zoomControl:!1,layers:[Acetate_all]}),baseLayers={Satellite:Esri_WorldImagery,"Street Map":Acetate_all};L.control.layers(baseLayers).addTo(map);var topPane=map._createPane("leaflet-top-pane",map.getPanes().mapPane);map.on("moveend",function(){map.getZoom()>13&&map.hasLayer(Esri_WorldImagery)&&addStreetLabels(),map.getZoom()<=13&&map.removeLayer(Esri_transportation)}),map.on("baselayerchange",function(){map.getZoom()>13&&map.hasLayer(Acetate_all)&&map.removeLayer(Esri_transportation),map.getZoom()>13&&map.hasLayer(Esri_WorldImagery)&&addStreetLabels()});var counties=L.geoJson(null,{style:function(a){return{color:"white",fill:!1,opacity:.4,clickable:!1}},onEachFeature:function(a,b){countySearch.push({name:b.feature.properties.Co_Name,source:"Counties",id:L.stamp(b),bounds:b.getBounds()})}});$.getJSON("data/counties.js",function(a){counties.addData(a)}).complete(function(){map.fitBounds(counties.getBounds())}),counties.addTo(map);var rdIconSize=30,PFFcustomIcon=L.Icon.extend({options:{iconSize:[rdIconSize,rdIconSize],iconAnchor:[rdIconSize/2,rdIconSize/2],popupAnchor:[0,rdIconSize/2]}}),IconPresets={markerSet:"open-freight",mapMarker:"circle-cm",legendMarker:"circle-md",iconSet:"dynico"},commicon=L.OpenFreightMarkers.icon({icon:"airport",markerColor:"forest",layer:"commGroup",title:"Commercial Airport"},IconPresets),relvicon=new L.OpenFreightMarkers.icon({icon:"airport",markerColor:"green",layer:"relGroup",title:"Reliever Airport"},IconPresets),helicon=L.OpenFreightMarkers.icon({icon:"heliport",markerColor:"ltgreen",layer:"heliport",title:"Heliport"},IconPresets),FCintericon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"peach",layer:"FCintergroup",title:"Intermediate Center"},IconPresets),FCmajoricon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"orange",layer:"FCmajorgroup",title:"Major Center"},IconPresets),FCmegaicon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"red",layer:"FCmegagroup",title:"Mega Center"},IconPresets),hwyicon=L.OpenFreightMarkers.icon({icon:"truck",markerColor:"purple",layer:"freeway",title:"Highway"},IconPresets),trckprkicon=L.OpenFreightMarkers.icon({icon:"parking",markerColor:"purple",layer:"trkparkgroup",title:"Truck Parking"},IconPresets),hwybricon=L.OpenFreightMarkers.icon({icon:"bridge",markerColor:"purple",layer:"hwyrivcrossing",title:"Highway River Crossing"},IconPresets),NHSicon=L.OpenFreightMarkers.icon({icon:"nhs",markerColor:"purple",layer:"nhsgroup",title:"NHS Connector"},IconPresets),railLineicon=L.OpenFreightMarkers.icon({icon:"rail",markerColor:"gold",layer:"railines",title:"Rail Line"},IconPresets),ryicon=L.OpenFreightMarkers.icon({icon:"railyard",markerColor:"gold",layer:"railyardgroup",title:"Rail Yard"},IconPresets),imicon=L.OpenFreightMarkers.icon({icon:"intermodal",markerColor:"gold",layer:"intermodalgroup",title:"Intermodal Yard"},IconPresets),xingicon=L.OpenFreightMarkers.icon({icon:"railxing",markerColor:"gold",layer:"gradexing",title:"Class I Grade Crossing"},IconPresets),rbicon=L.OpenFreightMarkers.icon({icon:"bridge",markerColor:"gold",layer:"railbridge",title:"Rail River Crossing"},IconPresets),prticon=L.OpenFreightMarkers.icon({icon:"ship",markerColor:"blue",layer:"portGroup",title:"Port Terminal"},IconPresets),anchicon=L.OpenFreightMarkers.icon({icon:"anchor",markerColor:"blue",layer:"anchorageGroup",title:"Anchorage"},IconPresets),riverIcon=L.OpenFreightMarkers.icon({icon:"river",markerColor:"blue",layer:"river",title:"Navigable River"},IconPresets),fgnicon=L.OpenFreightMarkers.icon({icon:"community",markerColor:"teal",layer:"fgneighbor",title:"Freight as a Good Neighbor"},IconPresets),pipeIcon=L.OpenFreightMarkers.icon({icon:"pipeline",markerColor:"yellow",layer:"pipelines",title:"Pipeline",onLoad:!1},IconPresets),commairpoly=L.geoJson(null,{style:{fillColor:"#216937",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkairport,dblclick:zoomToFeature}),commairSearch.push({name:b.feature.properties.Name,source:"CommAirports",id:L.stamp(b),bounds:b.getBounds()})}}),commairpt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:commicon})},onEachFeature:function(a,b){b.on({click:clkairport,dblclick:zoomToPoint})}}),relairpoly=L.geoJson(null,{style:{fillColor:"#30B34C",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkairport,dblclick:zoomToFeature}),relairSearch.push({name:b.feature.properties.Name,source:"ReleivAirports",id:L.stamp(b),bounds:b.getBounds()})}}),relvairpt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:relvicon})},onEachFeature:function(a,b){b.on({click:clkairport,dblclick:zoomToPoint})}}),heliport=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:helicon})},onEachFeature:function(a,b){b.on({click:clkheliport,dblclick:zoomToPoint}),heliportSearch.push({name:b.feature.properties.FacilityNa,source:"Heliports",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),FCinterpoly=L.geoJson(null,{style:{fillColor:"#F9AB90",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkFreightCenter,dblclick:zoomToFeature}),FCinterSearch.push({name:b.feature.properties.Name,source:"FCInter",id:L.stamp(b),bounds:b.getBounds()})}}),FCinterpt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:FCintericon})},onEachFeature:function(a,b){b.on({click:clkFreightCenter,dblclick:zoomToFC})}}),FCmajorpoly=L.geoJson(null,{style:{fillColor:"#F26122",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkFreightCenter,dblclick:zoomToFeature}),FCmajorSearch.push({name:b.feature.properties.Name,source:"FCmajor",id:L.stamp(b),bounds:b.getBounds()})}}),FCmajorpt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:FCmajoricon})},onEachFeature:function(a,b){b.on({click:clkFreightCenter,dblclick:zoomToFC})}}),FCmegapoly=L.geoJson(null,{style:{fillColor:"#C1332B",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkFreightCenter,dblclick:zoomToFeature}),FCmegaSearch.push({name:b.feature.properties.Name,source:"FCmega",id:L.stamp(b),bounds:b.getBounds()})}}),FCmegapt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:FCmegaicon})},onEachFeature:function(a,b){b.on({click:clkFreightCenter,dblclick:zoomToFC})}}),truckparkpoly=L.geoJson(null,{style:{fillColor:"#884C9E",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkParking,dblclick:zoomToFeature}),truckParkSearch.push({name:b.feature.properties.Name,source:"TruckParking",id:L.stamp(b),bounds:b.getBounds()})}}),tppoints=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:trckprkicon})},onEachFeature:function(a,b){b.on({click:clkParking,dblclick:zoomToPoint})}}),hwyrivcrossing=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:hwybricon})},onEachFeature:function(a,b){b.on({click:clkHwyRvrXing,dblclick:zoomToPoint}),hwyBridgeSearch.push({name:b.feature.properties.Name_1,source:"HwyBridges",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),nhspoly=L.geoJson(null,{style:{weight:5,color:"#E8C3F5 ",opacity:1},onEachFeature:function(a,b){b.on({click:clkNHS,dblclick:zoomToFeature}),nhsSearch.push({name:b.feature.properties.Name_1,source:"NHS",id:L.stamp(b),bounds:b.getBounds()})}}),nhs=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:NHSicon})},onEachFeature:function(a,b){b.on({click:clkNHS,dblclick:zoomToPoint})}}),freeway=L.geoJson(null,{style:function(a){switch(a.properties.Type){case"Limited Access Highway":return{color:"#C57AE0",weight:5,opacity:1};case"Interstate Highway":return{color:"#884C9E",weight:5,opacity:1}}},onEachFeature:function(a,b){b.on({click:clkHwy,dblclick:zoomToFeature}),highwaySearch.push({name:b.feature.properties.Name,source:"Highways",id:L.stamp(b),bounds:b.getBounds()})}}),railines=L.geoJson(null,{style:function(a){switch(a.properties.Type){case"Industrial Track / Shortline":return{color:"#FDD195",weight:5,opacity:.9};case"Secondary":return{color:"#FCBB65",weight:5,opacity:.9};case"Interstate":return{color:"#FD8D3C",weight:5,opacity:.9}}},onEachFeature:function(a,b){b.on({click:clkRailline,dblclick:zoomToFeature}),railSearch.push({name:b.feature.properties.Name,source:"RailLines",id:L.stamp(b),bounds:b.getBounds()})}}),railyardpoly=L.geoJson(null,{style:{fillColor:"#FBA919",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkRailYard,dblclick:zoomToFeature}),railyardSearch.push({name:b.feature.properties.Name,source:"RailYards",id:L.stamp(b),bounds:b.getBounds()})}}),railyardpt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:ryicon})},onEachFeature:function(a,b){b.on({click:clkRailYard,dblclick:zoomToPoint})}}),intermodalpoly=L.geoJson(null,{style:{fillColor:"#FBA919",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkIntermodal,dblclick:zoomToFeature}),intermodalSearch.push({name:b.feature.properties.Name_1,source:"Intermodal",id:L.stamp(b),bounds:b.getBounds()})}}),intermodalpt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:imicon})},onEachFeature:function(a,b){b.on({click:clkIntermodal,dblclick:zoomToPoint})}}),gradexing=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:xingicon})},onEachFeature:function(a,b){b.on({click:clkRailXing,dblclick:zoomToPoint}),xingSearch.push({name:b.feature.properties.Name,source:"GradeCrossing",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}});$.getJSON("data/gradeXing.js",function(a){gradexing.addData(a)});var railbridge=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:rbicon})},onEachFeature:function(a,b){b.on({click:clkRailRvrXing,dblclick:zoomToPoint}),RailBridgeSearch.push({name:b.feature.properties.Name,source:"RailBridges",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),river=L.geoJson(null,{style:{fillColor:"#55B8DF",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.65},onEachFeature:function(a,b){b.on({click:clkriver,dblclick:zoomToFeature}),riverSearch.push({name:b.feature.properties.NAME,source:"Rivers",id:L.stamp(b),bounds:b.getBounds()})}}),portpoly=L.geoJson(null,{style:{fillColor:"#29A0CF",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(a,b){b.on({click:clkport,dblclick:zoomToFeature}),portSearch.push({name:b.feature.properties.Name,source:"PortTerminals",id:L.stamp(b),bounds:b.getBounds()})}}),porticon=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:prticon})},onEachFeature:function(a,b){b.on({click:clkport,dblclick:zoomToPoint})}}),anchoragepoly=L.geoJson(null,{style:{fillColor:"#0E76BC",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.65},onEachFeature:function(a,b){b.on({click:clkanchorage,dblclick:zoomToFeature}),anchSearch.push({name:b.feature.properties.Name,source:"Anchorages",id:L.stamp(b),bounds:b.getBounds()})}}),anchoricon=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:anchicon})},onEachFeature:function(a,b){b.on({click:clkanchorage,dblclick:zoomToPoint})}}),pipelines=L.geoJson(null,{style:{color:"#EFD315",weight:3,opacity:.9},onEachFeature:function(a,b){b.on({click:clkpipelines,dblclick:zoomToFeature})}});map.on("moveend",function(){if(map.getZoom()>14&&($("#pipelabel").parent().addClass("disabled"),$("#pipelabel").closest(".panel").find(".checked_all").addClass("disabled")),map.getZoom()>14&&map.hasLayer(pipelines)&&$("#pipelines").is(":checked")){map.removeLayer(pipelines);var a=document.getElementById("pipehidden");a.innerHTML="[not available at zoom level]"}if(map.getZoom()<=14&&($("#pipelabel").parent().removeClass("disabled"),$("#pipelabel").closest(".panel").find(".checked_all").removeClass("disabled")),map.getZoom()<=14&&$("#pipelines").is(":checked")){map.addLayer(pipelines);var a=document.getElementById("pipehidden");a.innerHTML="",$("#pipelabel").parent().removeClass("disabled")}});var fgneighbor=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:fgnicon})},onEachFeature:function(a,b){b.on({click:clkfgneighbor,dblclick:zoomToPoint})}});countymap.addLayer(mcounty);var FCintergroup=new L.FeatureGroup([FCinterpt,FCinterpoly]),FCmajorgroup=new L.FeatureGroup([FCmajorpt,FCmajorpoly]),FCmegagroup=new L.FeatureGroup([FCmegapt,FCmegapoly]),FCenters={"Mega Center":FCmegagroup,"Major Center":FCmajorgroup,"Intermediate Center":FCintergroup},railyardgroup=new L.FeatureGroup([railyardpt,railyardpoly]),intermodalgroup=new L.FeatureGroup([intermodalpt,intermodalpoly]),Rail={"Rail Line":railines,"Rail Yard":railyardgroup,"Intermodal Yard":intermodalgroup,"Class I Grade Crossing":gradexing,"Rail River Crossing":railbridge},portGroup=new L.FeatureGroup([porticon,portpoly]),anchorageGroup=new L.FeatureGroup([anchoricon,anchoragepoly]),Portwater={"Navigable River":river,"Port Terminal":portGroup,Anchorage:anchorageGroup},commGroup=new L.FeatureGroup([commairpt,commairpoly]),relGroup=new L.FeatureGroup([relvairpt,relairpoly]),airport={Commercial:commGroup,Reliever:relGroup},nhsgroup=new L.FeatureGroup([nhspoly,nhs]),trkparkgroup=new L.FeatureGroup([truckparkpoly,tppoints]),Highway={Freeway:freeway,"NHS Connector":nhsgroup,"Truck Parking":trkparkgroup,"Highway River Crossing":hwyrivcrossing};$("#searchbox").click(function(){$(this).select()}),$.easing.jswing=$.easing.swing,$.extend($.easing,{def:"easeOutQuad",easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),$.fn.capitalize=function(){return $.each(this,function(){var a=this.value;a=a.charAt(0).toUpperCase()+a.slice(1),this.value=a}),this},$(function(){var a=document.location.toString();if(a.match("#")){var b=a.split("#")[1].split("/"),c=b[0];a.split("#")[1];"map"!=c&&void 0!==c?($("#"+c).show(),countymap.invalidateSize(),tab_status[c]===!1&&($("#"+c).load("includes/"+c+".html",loadScript(c)),tab_status[c]=!0)):setMap()}else $("#home").show();$('a[data-toggle="tab"]').on("show.bs.tab",function(a){window.location.hash=a.target.hash})}),$(window).bind("hashchange",function(){var a=getLocationHash();"map"!=a?($(".mapUI").fadeOut("fast","easeOutQuad",function(){$(".landingUI").fadeIn("fast","easeInQuad"),countymap.invalidateSize()}),tab_status[a]===!1&&($("#"+a).load("includes/"+a+".html",loadScript(a)),tab_status[a]=!0),$(".landtab-content > .tab-pane").hide(),$("#pFFlanding").animate({scrollTop:0},50),$("#"+a).show(),countymap.invalidateSize()):(setMap(),countymap.invalidateSize())}),$(window).resize(function(){if($(".tt-dropdown-menu").css("max-height",$("#container").height()-$(".navbar").height()-20),document.body.clientWidth<=767)$("#mapDIV").attr("class","col-sm-12 col-lg-12 leaflet-container leaflet-fade-anim"),$("#sidebar").css("display","none"),$("#toggle i").attr("class","glyphicon glyphicon-th-list");else{var a=$("#sidebar").css("display");"block"==a?($("#mapDIV").attr("class","col-sm-8 col-lg-9 leaflet-container leaflet-fade-anim"),$("#toggle i").attr("class","glyphicon glyphicon-chevron-left")):($("#mapDIV").attr("class","col-sm-12 col-lg-12 leaflet-container leaflet-fade-anim"),$("#toggle i").attr("class","glyphicon glyphicon-th-list"))}map.invalidateSize(),countymap.invalidateSize()}),"Microsoft Internet Explorer"==navigator.appName&&$("input").each(function(){""==$(this).val()&&""!=$(this).attr("placeholder")&&($(this).val($(this).attr("placeholder")),$(this).focus(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}),$(this).blur(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))}))}),$(document).ready(function(){function a(){return $("#loading").show().delay(100).promise()}$('[data-toggle="tooltip"]').tooltip(),document.body.clientWidth<=767&&($("#mapDIV").css("class","col-sm-12 col-lg-12"),$("#sidebar").css("display","none")),$(".checked_all").on("click",function(b){var c=$(this).parent().siblings(".panel-collapse").children(".panel-body").children("input.Chkd"),d=$(this);"true"==c.attr("value")?a().done(function(){d.children().attr("class","chkicon dynico dynico-check-square-o"),$(c).siblings(".checkbox").children("input").prop("checked",!0).change(),$(c).val("false"),$("#loading").fadeOut(150)}):(d.children().attr("class","chkicon dynico dynico-square-o"),$(c).siblings(".checkbox").children("input").prop("checked",!1).change(),$(c).val("true"))})}),$('input:checkbox[name="LayerCont"]').on("change",function(){var a=[];if($("#"+$(this).attr("id")).is(":checked")){$('input:checkbox[name="LayerCont"]').each(function(){map.removeLayer(window[$(this).attr("id")]),$("#"+$(this).attr("id")).is(":checked")&&a.push({"z-index":$(this).attr("z-index"),layer:$(this)})});var b=sortByKey(a,"z-index");$.each(b,function(){map.addLayer(window[$(this)[0].layer[0].id])})}else map.removeLayer(window[$(this).attr("id")])}),$(".layer").change(function(){var a=$(this).closest(".panel-body").find("input.layer").length,b=$(this).closest(".panel-body").find("input.layer:checked").length;a==b?($(this).closest(".panel").find(".checked_all").children().attr("class","chkicon dynico dynico-check-square-o"),$(this).closest(".panel-body").find(".Chkd").val("false")):($(this).closest(".panel").find(".checked_all").children().attr("class","chkicon dynico dynico-square-o"),$(this).closest(".panel-body").find(".Chkd").val("true"));var c=$(this).siblings(".dynacheck").length;c>0&&($(this).is(":checked")?$(this).siblings(".dynacheck").find(".legend-check i").attr("class","dynico dynico-check-square-o"):$(this).siblings(".dynacheck").find(".legend-check i").attr("class","dynico dynico-square-o"))}),$("#toggle").click(function(){$("#toggle i").toggleClass("glyphicon-chevron-left glyphicon-th-list"),$("#mapDIV").toggleClass("col-sm-8 col-lg-9 col-sm-12 col-lg-12");var a=$("#sidebar").css("display");return"block"==a?$("#sidebar").css("display","none"):$("#sidebar").css("display","block"),document.body.clientWidth<=767&&$("#mapDIV").toggleClass("hidden"),map.invalidateSize(),mountymap.invalidateSize(),!1}),$(".InfoTgl").click(function(){$("#infobox_").hasClass("active")?togglemin():toggleinfo()}),$("#mobileInfo_modal").on("hide.bs.modal",function(){resetHighlight()}),$(document).ajaxStop(function(){setTimeout(function(){$("#loading").hide()},300)}),L.Control.mapCenter=L.Control.Zoom.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomMinText:"<i class='dynico dynico-dvrpc'></i>",zoomMinTitle:"View Full Region",vcLatLng:[oLat,oLng],vcZoom:9},onAdd:function(a){var b="leaflet-control-zoom",c=L.DomUtil.create("div",b+" leaflet-bar"),d=this.options;return this._map=a,this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._zoomMinButton=this._createButton(d.zoomMinText,d.zoomMinTitle,b+"-min",c,this._zoomMin,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},_zoomMin:function(){var a=this.options,b=a.vcZoom||6;this._map.setView(a.vcLatLng,b)},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,b),L.DomUtil.removeClass(this._zoomOutButton,b),L.DomUtil.removeClass(this._zoomMinButton,b),a._zoom===a.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,b),a._zoom===a.getMinZoom()&&L.DomUtil.addClass(this._zoomMinButton,b)}}),map.addControl(new L.Control.mapCenter),map.on("click",function(a){resetHighlight(),resetInfoWindow()}),$(".tab-content").find(".panel-group.legend .panel-heading").first().find("a > div").attr("data-placement","bottom"),$(".panel-group.legend").find(".panellink").attr("data-toggle","tooltip").attr("title","View/hide layers in group"),$(".panel-group.legend").find(".panelinfo").attr("data-toggle","tooltip").attr("title","Learn about these layers"),$(".panel-group.legend").find(".checked_all").attr("data-toggle","tooltip").attr("title","Toggle All Layers").attr("data-placement","left"),function(a){"use strict";function b(b){a(b).on("click"+n,this.toggle)}function c(a,b){a.hasClass("pull-center")&&a.css("margin-right",a.outerWidth()/-2),a.hasClass("pull-middle")&&a.css("margin-top",a.outerHeight()/-2-b.outerHeight()/2)}function d(b,c){if(g){c||(c=[g]);var d;g[0]!==c[0][0]?d=g:(d=c[c.length-1],d.parent().hasClass(k)&&(d=d.parent())),d.find("."+o).removeClass(o),d.hasClass(o)&&d.removeClass(o),d===g&&(g=null,a(j).remove())}}function e(a){for(var b,c=[a];!b||b.hasClass(l);)b=(b||a).parent(),b.hasClass(k)&&(b=b.parent()),b.children(h)&&c.unshift(b);return c}function f(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var g,h='[data-toggle="dropdown"]',i=".disabled, :disabled",j=".dropdown-backdrop",k="dropdown-menu",l="dropdown-submenu",m=".bs.dropdown.data-api",n=".bs.dropdown",o="open",p="ontouchstart"in document.documentElement,q=b.prototype;q.toggle=function(b){var h=a(this);if(!h.is(i)){var m=f(h),n=m.hasClass(o),q=m.hasClass(l),r=q?e(m):null;if(d(b,r),!n){r||(r=[m]),!p||m.closest(".navbar-nav").length||r[0].find(j).length||a('<div class="'+j.substr(1)+'"/>').appendTo(r[0]).on("click",d);for(var s=0,t=r.length;t>s;s++)r[s].hasClass(o)||(r[s].addClass(o),c(r[s].children("."+k),r[s]));g=r[0]}return!1}},q.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var c=a(this);if(b.preventDefault(),b.stopPropagation(),!c.is(".disabled, :disabled")){var d=f(c),e=d.hasClass("open");if(!e||e&&27==b.keyCode)return 27==b.which&&d.find(h).trigger("focus"),c.trigger("click");var g=" li:not(.divider):visible a",i="li:not(.divider):visible > input:not(disabled) ~ label",j=d.find(i+', [role="menu"]'+g+', [role="listbox"]'+g);if(j.length){var k=j.index(j.filter(":focus"));38==b.keyCode&&k>0&&k--,40==b.keyCode&&k<j.length-1&&k++,~k||(k=0),j.eq(k).trigger("focus")}}}},q.change=function(b){var c,d,e,f="";if(c=a(this).closest("."+k),d=c.parent().find("[data-label-placement]"),d&&d.length||(d=c.parent().find(h)),d&&d.length&&d.data("placeholder")!==!1){void 0==d.data("placeholder")&&d.data("placeholder",a.trim(d.text())),f=a.data(d[0],"placeholder"),e=c.find("li > input:checked"),e.length&&(f=[],e.each(function(){var b=a(this).parent().find("label").eq(0),c=b.find(".data-label");if(c.length){var d=a("<p></p>");d.append(c.clone()),b=d.html()}else b=b.html();b&&f.push(a.trim(b))}),f=f.length<4?f.join(", "):f.length+" selected");var g=d.find(".caret");d.html(f||"&nbsp;"),g.length&&d.append(" ")&&g.appendTo(d)}};var r=a.fn.dropdown;a.fn.dropdown=function(c){return this.each(function(){var d=a(this),e=d.data("bs.dropdown");e||d.data("bs.dropdown",e=new b(this)),"string"==typeof c&&e[c].call(d)})},a.fn.dropdown.Constructor=b,a.fn.dropdown.clearMenus=function(b){return a(j).remove(),a("."+o+" "+h).each(function(){var c=f(a(this)),d={relatedTarget:this};c.hasClass("open")&&(c.trigger(b=a.Event("hide"+n,d)),b.isDefaultPrevented()||c.removeClass("open").trigger("hidden"+n,d))}),this},a.fn.dropdown.noConflict=function(){return a.fn.dropdown=r,this},a(document).off(m).on("click"+m,d).on("click"+m,h,q.toggle).on("click"+m,'.dropdown-menu > li > input[type="checkbox"] ~ label, .dropdown-menu > li > input[type="checkbox"], .dropdown-menu.noclose > li',function(a){a.stopPropagation()}).on("change"+m,'.dropdown-menu > li > input[type="checkbox"], .dropdown-menu > li > input[type="radio"]',q.change).on("keydown"+m,h+', [role="menu"], [role="listbox"]',q.keydown)}(jQuery);